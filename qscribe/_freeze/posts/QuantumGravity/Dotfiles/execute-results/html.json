{
  "hash": "b343c6aa0a2006979391bbb85aa01bfa",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Dotfiles\"\nauthor: \"Rakesh Venkat\"\ndate: \"2021-08-26\"\ncategories: [Dotfiles, Setup]\nimage: \"img/dotfiles.png\"\njupyter: python3\n---\n\n# Introduction\n\nIn the first part of my `Productivity` series, we talked about configuring [Neovim](https://neovim.io/) as your IDE. You can check out that [blog](https://rvbug.hashnode.dev/configuring-neovim) and my configuration [here](https://github.com/rvbug/neovim).\n\n<!-- truncate -->\n\n------------------------------------------------------------------------\n\nIn this part, let us talk about the magic of **.dotfiles**, how to automate your development workflow, manage repetitive tasks by installing softwares, setting up editor shortcuts, and even configuring the development environment across multiple machines for a unified experience.\n\n# dotfiles - What are they?\n\ndotfiles are configuration files with a dot(.) leading the filename. They are usually found on all \\*nix based systems helping store various settings and configurations.\n\nHere's how to find them - Open your favourite terminal and try the following command to show all the hidden files/directories.\n\n``` bash\n$> ls -a\n```\n\n# OS\n\nThis script has been tested on:\n\n-   Mac Sonoma\n\n-   Mac Ventura (Virtual Environment)\n\n-   Ubuntu (Virtual Environment)\n\n-   Fedora (Virtual Environment)\n\n-   Docker - Ubuntu, Fedora and Debian\n\n# Workflow\n\nDownload the repo\n\n``` bash\n# clone the repo\n$> git clone https://github.com/rvbug/.dotfiles\n\n# check if the .dotfile directory is available\n$> ls -a \n\n# cd into the folder\n$> cd .dotfiles\n\n# run the first script \n$> ./install.sh\n\n# Note: if you want to run it in a debug mode, try\n# $> sh -x install.sh\n```\n\n`install.sh` is the entry point which checks for OS version\n\n``` bash\n#check the OS version\nos=$(uname -s)\n\n# If it is Darwin then should be mac \nif [ $os == \"Darwin\" ]; then \n#...\n# run mac script\n./macos.sh\n#...\n# Linux variant \nelif [ $os == \"Linux\" ]; then\n#...\n# call linux script\n./linux.sh\n```\n\n## The List\n\nSince these are highly personal configurations, the requirement was to make these scripts flexible and easy to use and maintain . The newer version now uses text files from the previous `YAML` based configuration.\n\nBelow are the three text files used in the script:\n\n`software_list.txt` - List of all softwares to be installed on your machine.\n\n`pip_list.txt` - If you are into Data Science or ML then you can add or remove the libraries. e.g. If you use PyTorch , just swap it with Tensorflow.\n\n`config_list.txt` - List of all dotfiles to be maintained.\n\n`Note`: YAML is a widely used data serialization language for writing configuration files.\n\n## Mac\n\nIf mac is detected then it will look if [Homebrew](https://brew.sh/) (package manager) and git is installed already.\n\n### Homebrew & Git\n\n``` bash\n# check if homebrew is already installed\nif command -v brew &>/dev/null; then\n  echo \"Homebrew already installed\"\nelse\n# if not install \n  echo \"##### Installing homebrew...\"\n#...\nfi\n\n#...\n\n# checking for git on your machine.\nif command -v git &>/dev/null; then\n  echo \"git already installed...\"\n#...\n```\n\n### Installing softwares\n\nThe next step is to check if `software_list.txt` file is available to start the installation process. For certain softwares like Lua, specific version is required. For OCaml, users have an option to skip the installation.\n\n`Note:` Ocaml is a general purpose \"functional\" programming language. You can read more about it [here](https://ocaml.org/).\n\n``` bash\n # check if lua is already is installed\nif brew list lua &>/dev/null; then\n#...\n# if not then install via brew\nbrew install lua@5.4\n\n#...\n\n# check with user for OCaml installation\nread -p \"do you want to install ocaml? (y/n): \" choice\n#...\n```\n\n### Data Science and ML\n\nThen comes installing Data Science tools. The only requirement is to have `pyyaml` installed on your machine.\n\n``` bash\n# check for pyyaml installation\n# install if not available.\nif brew list pyyaml &>/dev/null; then\n```\n\nI have a [repo](https://github.com/rvbug/cookie-ml) where you get a cookie-cutter template for ML projects. It downloads the repo and sets up your machine to get you started immediately.\n\n``` bash\n# checks if cookie-cutter is already installed\n# in your home directory\nif [ -d \"$HOME/ml-cookie-cutter\" ]; then\n\n# if not then download the repo \n# install and activate virtual env \necho \"####### activating the venv...\"\nsource venv/bin/activate \n\n# ensure pip is installed and then start \n# installing the ML libraries\npip3 install $cfg\n\n# Once done the cleanup starts...\n# delete the downloaded repo and \n# deactivate the virtual env\n#...\n```\n\n### Final configuration\n\nNow on to the final steps of the installation process - Back up the existing configuration files and check for Neovim.\n\n``` bash\n# Take the backup of the existing config files\ncp $HOME/$line $HOME/$line.bak.$(date +%Y-%m-%d-%H:%M:%S)\n\n# If Neovim is already installed, need to \n# backup the existing configuration\ncp -r $HOME/.config/nvim/ $HOME/.config/nvim.bak.$dt\n```\n\nThe script will check for xcode command-line tools\n\n``` bash\n# check for commandline tools\nxcode-select --version > /dev/null\n\n# if not then install them\nxcode-select --install\n```\n\n## Linux\n\nFor Linux, most of the process remains the same with a few subtle differences.\n\n### OS and Package Manager\n\nThe script first checks the version of Linux and sets the package manager.\n\n``` bash\n# if Ubuntu or Debian, then set the package as ap-get\npkg_mgr=apt-get\n# If Fedora, then go for dnf \npkg_mgr=dnf \n# if dnf is not available go for yum\n```\n\n### Additional checks\n\nNever (**ever**) run any script as a root user, the script warns if you do so and also check for sudo access. Few software installations are skipped if it is not supported by that operating system.\n\n``` bash\n# caution the user if it is root user\nuser=$(whoami)\nif [ \"$user\" == \"root\" ]; then\n\n# Option to run this with sudo access\nread -p \"do you want to run this script as sudo (y/n)?\" choice\n\n# check if you want to upgrade your system\n# before starting the installation\n$su_user $pkg_mgr update -y\n```\n\n## Docker Support\n\nIf you want to try out this script on docker containers then here are some helpful commands. You can download the images and run the container as shown below.\n\n``` bash\n# To pull the images\ndocker pull fedora # debian # or ubuntu\n\n# run the container\n$> docker run --name fedora -d -i -t fedora /bin/bash\n\n# check the processes\n$> docker ps\n\n# to drop inside the container\n# replace the container-id with the number \n# shown with the above command\n$> docker exec -it \"container-id\" /bin/bash\n```\n\n`Note` If you are using the docker machine, you will be dropped into the container as \"root\".\n\n## Config files\n\nI used the following files for my machine configuration:\n\n1.  .zshrc - This helps to configure your shell and is known to provide great customization.\n\n2.  .tmux.conf - If you are like me managing multiple projects, why not consider a terminal multiplexer like tmux. It helps create sessions with multiple windows and panes which can be attached and detached easily.\n\n3.  .wezterm.lua - I migrated from iterm to a rust based terminal called wezterm, which uses lua based configuration.\n\n4.  startship.toml - It is used for customizing your shell prompt.\n\n# Conclusion\n\nHere's how I created a simple script to set the installation and configuration automatically. Use this as an inspiration to build your own personalized configuration.\n\n# Reference\n\n[Productivity Series I - Blog](https://rvbug.hashnode.dev/configuring-neovim)\n\n[My Neovim Configuration](https://github.com/rvbug/neovim)\n\n[My Dotfiles - Github](https://github.com/rvbug/.dotfiles)\n\n[Terminal Multiplexer](https://github.com/tmux/tmux/wiki)\n\n[Wezterm - Rust based Terminal](https://wezfurlong.org/wezterm/index.html)\n\n[Starship - Customizable Shell Prompt](https://starship.rs/)\n\n[Docker](https://www.docker.com/)\n\n[OCaml - Functional Programming Lang](https://ocaml.org/)\n\n",
    "supporting": [
      "Dotfiles_files"
    ],
    "filters": [],
    "includes": {}
  }
}