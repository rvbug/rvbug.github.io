{
  "hash": "dba2cd783c8ec41314111c6ef7aa8304",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Cookie Cutter ML\"\nauthor: \"Rakesh Venkat\"\ndate: \"2021-08-26\"\ncategories: [Datascience, ML]\nimage: \"img/cookie-ide.png\"\njupyter: python3\n---\n\n# Introduction\n\nI go by one simple principle\n\n> If you repeat the same steps twice, then automate it the third time.\n\n<!-- truncate -->\n\n------------------------------------------------------------------------\n\nCouple of years back, I wrote blog on how to :\n\n1\\> Structure your Data Science and ML project - [Link here](https://rvbug.hashnode.dev/structuring-data-science-and-ml-projects)\n\n2\\> Automating ML structure using `Make` and a simple `Python Script` - [Link here](https://rvbug.hashnode.dev/ml-cookie-cutter).\n\nIn this follow-up article, I will provide an update to the cookie-cutter project which now uses `yaml` making it far more flexible and easy to use.\n\n# Project Structure\n\nHere's the structure I use for all my ML projects.\n\nYou can create a different one but these are pretty standard for most of the projects.\n\n![folder](img/folder.png)\n\n## YAML\n\nYAML is **a text based data serialization language for managing your configuration files**. YAML stands for `Yet Another Markup Language` or `YAML ain't markup language`. You can read more about it [here](https://en.wikipedia.org/wiki/YAML).\n\nHere's the YAML format used in my project.\n\n``` yaml\n  # support for data version control\n  - .dvc:\n\n  # if you plan to use docker container\n  - docker:\n    - Dockerfile\n\n  # basic ML development files\n  - src:\n    - __init__.py\n    - data_pipeline.py\n    - data_processing.py\n\n  ####\n```\n\n# Script\n\nOne of the main pre-requisites for this script is `pyyaml`. You can find the documentation [here](https://pyyaml.org/wiki/PyYAMLDocumentation). Install them via [pip](https://pip.pypa.io/en/stable/).\n\n## Argparse\n\nEverything starts with the main function. It uses argparse to parse command line arguments provided to the script. It then loads the yaml config file.\n\n``` python\n# parse the arguments provided on the command line\nargs = parse_args()\n\n# Load yaml config\nconfig = load_config()\n```\n\nThe parser will look for specific flags and take action. More about that in the Help section below.\n\n``` python\nparser.add_argument(\"--n\", \"--name\", #...)\nparser.add_argument(\"--p\", \"--path\",  #...) \nparser.add_argument(\"--c\", \"--config\",  #...)\nparser.add_argument(\"--v\", \"--venv\",  #...)\n```\n\n## File and Directories\n\nBased on how YAML is structured, the script will create files, directories and sub-directories via a function `create_directories`\n\n``` python\ndef create_directories(project_path, config):\n\nif isinstance(config, str):\n        item_path = os.path.join(project_path, config)\n        with open(item_path, \"w\"):\n            pass  # empty file\n\n#...\n```\n\n## Virtual env\n\nIf you provide flag to create a [virtual environment](https://docs.python.org/3/library/venv.html), the script will create one for you. There is a function called `create_virtual_env` to do exactly that.\n\n``` python\ndef create_virtual_env(project_path, activate=True):\n#...\nif not os.path.exists(venv_path):\n        venv.create(venv_path, with_pip=True)\n#...\n```\n\n## Help\n\nWhen you use `-h` flag, it will show you how to use the script.\n\nIf you want to give a specific name to your project use `--n or N` flag. If not, it will create a default directory called `ml-cookie-cutter.`\n\nSpecify the path where the project needs to be created using `--p or P` flag.\n\nFinally, if you want the script to create a virtual environment for you, go ahead and use the `--v or --venv` flag. By default, the name of the environment is `venv`.\n\n``` bash\n\n$> python3 main.py --h\n\n# usage: ML Cookie Cutter [-h] [--n N] [--p P] [--c C] [--v]\n\n# Creates ML project cookie cutter structure\n\n#optional arguments:\n#  -h, --help       show this help message and exit\n#  --n N, --name N  Name of the directory to be created, default = ml-cookie-cutter\n#  --p P, --path P    provide the path where, default is $HOME dir\n#  --v, --venv        create a virtual env. [ignore if you are already on a virtual env]\n\n# Enjoy and happy coding\n```\n\n## Final step\n\nOnce you have the virtual environment set up, you can activate it as shown below. You should see that it in your command prompt; go ahead and start installing all your Data science and ML libraries.\n\nFor deactivating simply type `deactivate`\n\n``` bash\n# go to the project folder\n$> cd ml-cookie-cutter\n# activate the environment \n$> source venv/bin/activate \n\n# venv is activated \n(venv) $> pip install numpy pandas pytorch seaborn notebook\n\n# To deactive use the following command\n(venv) $> deactivate\n$>\n```\n\nOn windows if you use PowerShell activate using `Activate.ps1`\n\n# Conclusion\n\nThis article shows how you can use this cookie-cutter project and create a ML structure with a simple command-line tool. Enjoy and have fun learning!\n\nThis is how I have used the cookie-cutter project to create a ML structure with a simple command-line tool. Enjoy and have fun learning!\n\nHappy coding!\n\n# References\n\n[Github - Complete Code](https://github.com/rvbug/cookie-ml/)\n\n[Pyyaml Documentation](https://pypi.org/project/PyYAML/)\n\n[Installing Python](https://www.python.org/)\n\n[PIP Installation](https://pip.pypa.io/en/stable/)\n\n[How to structure your ML projects](https://rvbug.hashnode.dev/ml-cookie-cutter)\n\n[Automating ML structure (v 1.0)](https://rvbug.hashnode.dev/structuring-data-science-and-ml-projects)\n\n[Documentation on Virtual Env](https://docs.python.org/3/library/venv.html)\n\n",
    "supporting": [
      "cookie_cutter_files"
    ],
    "filters": [],
    "includes": {}
  }
}