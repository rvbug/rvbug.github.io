---
title: "03-architecture"
format: html
---

------------------------------------------------------------------------

# Chapter 3 â€” Architecture Overview

` ratcrate-core` consists of the following modules:

```markdown

-   main.rs
-   sparse_parser.rs
-   crates_client.rs
-   index_cache.rs
-   crate_cache.rs
-   state.rs
-   json_generator.rs
-   types.rs

```

## Architecture Diagram

```{mermaid} 
flowchart LR
    A[main.rs] --> B[sparse_parser.rs]
    A --> C[index_cache.rs]
    A --> D[crate_cache.rs]
    A --> E[crates_client.rs]
    A --> F[state.rs]
    A --> G[json_generator.rs]
```


## Component Responsibilities

`sparse_parser.rs`
- [ ] Scans crates.io sparse index
- [ ] Extracts latest versions depending on ratatui

`index_cache.rs`

- [ ] Remembers version + last_checked

- [ ] Drives fetch/skip logic

`crate_cache.rs`

- [ ] Stores full CratePackage metadata

- [ ] Used for cache hits

`crates_client.rs`

- [ ] HTTP client for crates.io

- [ ] Handles retries and rate limits

`state.rs`

- [ ] Stores run progress

- [ ] Supports resume

`json_generator.rs`

- [ ] Builds final dataset and writes atomically
