% Options for packages loaded elsewhere
% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod]{scrreprt}
\usepackage{xcolor}
\usepackage{amsmath,amssymb}
\setcounter{secnumdepth}{5}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
% Make \paragraph and \subparagraph free-standing
\makeatletter
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}{
    \@ifstar
      \xxxParagraphStar
      \xxxParagraphNoStar
  }
  \newcommand{\xxxParagraphStar}[1]{\oldparagraph*{#1}\mbox{}}
  \newcommand{\xxxParagraphNoStar}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}{
    \@ifstar
      \xxxSubParagraphStar
      \xxxSubParagraphNoStar
  }
  \newcommand{\xxxSubParagraphStar}[1]{\oldsubparagraph*{#1}\mbox{}}
  \newcommand{\xxxSubParagraphNoStar}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
\makeatother

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\newsavebox\pandoc@box
\newcommand*\pandocbounded[1]{% scales image to fit in text height/width
  \sbox\pandoc@box{#1}%
  \Gscale@div\@tempa{\textheight}{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
  \Gscale@div\@tempb{\linewidth}{\wd\pandoc@box}%
  \ifdim\@tempb\p@<\@tempa\p@\let\@tempa\@tempb\fi% select the smaller of both
  \ifdim\@tempa\p@<\p@\scalebox{\@tempa}{\usebox\pandoc@box}%
  \else\usebox{\pandoc@box}%
  \fi%
}
% Set default figure placement to htbp
\def\fps@figure{htbp}
\makeatother
\usepackage{svg}





\setlength{\emergencystretch}{3em} % prevent overfull lines

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}



 


\KOMAoption{captions}{tableheading}
\makeatletter
\@ifpackageloaded{tcolorbox}{}{\usepackage[skins,breakable]{tcolorbox}}
\@ifpackageloaded{fontawesome5}{}{\usepackage{fontawesome5}}
\definecolor{quarto-callout-color}{HTML}{909090}
\definecolor{quarto-callout-note-color}{HTML}{0758E5}
\definecolor{quarto-callout-important-color}{HTML}{CC1914}
\definecolor{quarto-callout-warning-color}{HTML}{EB9113}
\definecolor{quarto-callout-tip-color}{HTML}{00A047}
\definecolor{quarto-callout-caution-color}{HTML}{FC5300}
\definecolor{quarto-callout-color-frame}{HTML}{acacac}
\definecolor{quarto-callout-note-color-frame}{HTML}{4582ec}
\definecolor{quarto-callout-important-color-frame}{HTML}{d9534f}
\definecolor{quarto-callout-warning-color-frame}{HTML}{f0ad4e}
\definecolor{quarto-callout-tip-color-frame}{HTML}{02b875}
\definecolor{quarto-callout-caution-color-frame}{HTML}{fd7e14}
\makeatother
\makeatletter
\@ifpackageloaded{bookmark}{}{\usepackage{bookmark}}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={Book},
  pdfauthor={Rakesh Venkat},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}


\title{Book}
\author{Rakesh Venkat}
\date{2025-11-30}
\begin{document}
\maketitle

\renewcommand*\contentsname{Table of contents}
{
\hypersetup{linkcolor=}
\setcounter{tocdepth}{3}
\tableofcontents
}

\bookmarksetup{startatroot}

\chapter{Overview}\label{overview}

\bookmarksetup{startatroot}

\chapter{Documentation hub.}\label{documentation-hub.}

\begin{quote}
This site collects Technical Docs, Architecture Notes, and Design
Decisions for all my projects.
\end{quote}

\bookmarksetup{startatroot}

\chapter{How to Use This Site}\label{how-to-use-this-site}

\begin{itemize}
\tightlist
\item
  Use the \textbf{sidebar} or the project cards above to jump into a
  specific project.\\
\item
  Within each project:

  \begin{itemize}
  \tightlist
  \item
    Start with the \emph{Overview} chapter
  \item
    Then read Architecture / Workflow chapters
  \item
    Dive into Code Snippets, Testing, and Future Work as needed
  \end{itemize}
\end{itemize}

This site is primarily written for \textbf{future me} --- but if you're
reading it later\\
as a user or contributor, I hope it gives you clear insight into how
everything fits together

\bookmarksetup{startatroot}

\chapter{Roadmap \& Future Projects}\label{roadmap-future-projects}

This hub is designed to grow over time as more tools and experiments
appear.

Planned additions include:

\begin{itemize}
\tightlist
\item
  ðŸ§ª Experimental tools around Rust / Ratatui / docs automation\\
\item
  ðŸ§° Libraries for working with generated JSON data\\
\item
  ðŸ—‚ More utilities for automating documentation workflows
\end{itemize}

When a new project is created, it will get:

\begin{itemize}
\tightlist
\item
  Its own folder (e.g.~\texttt{new-project/})\\
\item
  Its own mini ``book'' of chapters\\
\item
  A card on this page linking into its docs
\end{itemize}

\bookmarksetup{startatroot}

\chapter*{}\label{section}
\addcontentsline{toc}{chapter}{}

\markboth{}{}

\bookmarksetup{startatroot}

\chapter{About Me}\label{about-me}

I'm \textbf{Rakesh V}, a developer and tinkerer who enjoys building
tools that make it easier to think, automate, and explore ideas.

I maintain the projects in this ``book'' --- most of them in Rust, some
around Ratatui, and others around documentation and tooling.

If you'd like to know more about my background, how these tools came
about, and how to support my work, see:

âž¡ï¸ \href{about-author.qmd}{Read more in ``Author'' section}

\bookmarksetup{startatroot}

\chapter{Projects Overview}\label{projects-overview}

\subsection{ðŸ€ ratcrate-core}\label{ratcrate-core}

The \textbf{engine} behind the Ratatui ecosystem index.

\begin{itemize}
\tightlist
\item
  Scans the crates.io sparse index\\
\item
  Finds all crates depending on \texttt{ratatui}\\
\item
  Enriches them with crates.io metadata\\
\item
  Applies smart caching (version + timestamp based)\\
\item
  Produces \texttt{ratcrate.json} for other tools to consume
\end{itemize}

âž¡ï¸ \href{rat-core/index.qmd}{Read the ratcrate-core docs Â»}

\subsection{ðŸ’» ratcrate-cli}\label{ratcrate-cli}

A command-line interface for exploring the Ratatui ecosystem.

\begin{itemize}
\tightlist
\item
  Reads \texttt{ratcrate.json} produced by \texttt{ratcrate-core}\\
\item
  Search and filter Ratatui crates from the terminal\\
\item
  Show stats, links, and crate details in a compact way
\end{itemize}

âž¡ï¸ \href{rat-cli/index.qmd}{Read the ratcrate-cli docs Â»}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{\texorpdfstring{ðŸŽ› ratcrate-tui
\emph{(planned)}}{ðŸŽ› ratcrate-tui (planned)}}\label{ratcrate-tui-planned}

A \textbf{Ratatui-based TUI} for browsing Ratatui crates.\\
Very meta. Very fun.

\begin{itemize}
\tightlist
\item
  Terminal UI built with Ratatui\\
\item
  Interactive search and filters\\
\item
  Crate detail views with stats and links\\
\item
  Powered by \texttt{ratcrate-core} data
\end{itemize}

âž¡ï¸ \href{rat-tui/index.qmd}{Read the ratcrate-tui docs Â»}

\subsection{â˜ï¸Ž doc2quarto}\label{doc2quarto}

A helper tool for turning rough notes, markdown, or code comments into\\
\textbf{structured Quarto documentation}.

\begin{itemize}
\tightlist
\item
  Convert notes into \texttt{.qmd} skeletons\\
\item
  Generate chapter structures\\
\item
  Insert placeholders for diagrams/screenshots\\
\item
  Ideal for standardizing docs across all projects
\end{itemize}

âž¡ï¸ \href{doc2quarto/index.qmd}{Read the doc2quarto docs Â»}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{ðŸŽ› QBanner}\label{qbanner}

A \textbf{Ratatui-based TUI} for browsing Ratatui crates.\\
Very meta. Very fun.

\begin{itemize}
\tightlist
\item
  Terminal UI built with Ratatui\\
\item
  Interactive search and filters\\
\item
  Crate detail views with stats and links\\
\item
  Powered by \texttt{ratcrate-core} data
\end{itemize}

âž¡ï¸ \href{qbanner/index.qmd}{Read the Qbanner Libraryi docs Â»}

\subsection{â˜ QSwitch (Planned)}\label{qswitch-planned}

A helper tool for turning rough notes, markdown, or code comments into\\
\textbf{structured Quarto documentation}.

\begin{itemize}
\tightlist
\item
  Optimized workflow
\end{itemize}

âž¡ï¸ \href{}{Coming Soons Â»}

\bookmarksetup{startatroot}

\chapter{Author}\label{author}

\bookmarksetup{startatroot}

\chapter{About the Author}\label{about-the-author}

Hi, I'm \textbf{Rakesh Venkat} --- a developer, researcher, and lifelong
tinkerer who likes building tools that:

\begin{itemize}
\tightlist
\item
  Automate away repetitive work\\
\item
  Make it easier to explore ideas\\
\item
  Give people nicer ways to learn from and navigate code
\end{itemize}

Most of the projects in this book revolves around:

\begin{itemize}
\tightlist
\item
  ðŸ¦€ \textbf{Rust} and terminal tools\\
\item
  ðŸ§ª \textbf{Ratatui} TUIs (very meta)\\
\item
  ðŸ“š \textbf{Documentation} and knowledge organization\\
\item
  ðŸ§© Small research \& experiments that later become libraries or tools
\end{itemize}

I think of this book as a logbook of the systems I'm building and how
they fit together.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{What I'm Trying to Do With These
Projects}\label{what-im-trying-to-do-with-these-projects}

The broader goals behind these tools:

\begin{itemize}
\tightlist
\item
  Build \textbf{high-leverage tools} that save time for other
  developers.\\
\item
  Collect and organize knowledge (like the Ratatui ecosystem) so people
  don't have to rediscover the same things repeatedly.
\item
  Treat documentation as a first-class artifact, not an afterthought.
\end{itemize}

\texttt{ratcrate-core} is one piece of that: a way to turn a noisy,
low-level index into a structured, queryable view of an ecosystem.

Future projects like \texttt{ratcrate-cli}, \texttt{ratcrate-tui}, and
\texttt{doc2quarto} are meant to build on top of that foundation.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{A Note to Future Me (and Future
Readers)}\label{a-note-to-future-me-and-future-readers}

This book is partly a gift to \textbf{future me}: so I can come back in
six months, read a chapter, and instantly remember why I made certain
decisions.

If you're reading it as someone else:

\begin{itemize}
\tightlist
\item
  I hope it helps you understand the design of these projects.
\item
  I'd love it if it inspires you to build your own tools, or contribute
  ideas and improvements.
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Links}\label{links}

You can find me here:

\begin{itemize}
\item
  ðŸ™ GitHub: \url{https://github.com/rvbug}\\
\item
  ðŸŒ Website: \url{https://qubitai.in}\\
\item
  ðŸ¦ X (Twitter): \url{https://x.com/rvbugged}\\
\item
  ðŸ’¼ LinkedIn: \url{https://www.linkedin.com/in/rvbugged/}\\
\item
  ðŸ™ Mastadon: \url{https://mastodon.social/@rvbugged}\\
\end{itemize}

\section{Sponsor}\label{sponsor}

\begin{figure}[H]

{\centering \pandocbounded{\includesvg[keepaspectratio]{index_files/mediabag/githubbutton_sm.svg}}

}

\caption{Ko-Fi}

\end{figure}%

\part{rat-core}

\chapter{Ratcrate-core Documentation}\label{ratcrate-core-documentation}

Welcome to the official documentation for \textbf{ratcrate-core}, the
backend engine powering the Ratatui ecosystem index.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

This book covers:

\begin{itemize}
\item
  The origin story
\item
  Technical architecture
\item
  Sparse index parsing
\item
  Metadata enrichment
\item
  Multi-day caching
\item
  State \& checkpointing
\item
  Final JSON output
\item
  Code walkthroughs
\item
  Future roadmap
\end{itemize}

\begin{tcolorbox}[enhanced jigsaw, rightrule=.15mm, arc=.35mm, colbacktitle=quarto-callout-note-color!10!white, toptitle=1mm, bottomrule=.15mm, opacityback=0, toprule=.15mm, opacitybacktitle=0.6, coltitle=black, colback=white, bottomtitle=1mm, left=2mm, colframe=quarto-callout-note-color-frame, breakable, titlerule=0mm, leftrule=.75mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Note}]

This project is currently private and will be open-sourced later.

\end{tcolorbox}

\chapter{01-Origin}\label{origin}

\chapter{Chapter 1 --- Origin of the
Idea}\label{chapter-1-origin-of-the-idea}

The idea for \textbf{ratcrate-core} began while exploring the growing
ecosystem around the Rust TUI framework \textbf{Ratatui}.

Despite hundreds of crates and applications using Ratatui, there was:

\begin{itemize}
\tightlist
\item
  No central directory\\
\item
  No easy way to search TUI apps\\
\item
  No dashboard showing downloads, popularity, repositories\\
\item
  No index of community examples\\
\item
  No machine-readable dataset
\end{itemize}

So \textbf{ratcrate-core} was born.

\section{Goals}\label{goals}

\begin{itemize}
\tightlist
\item
  Discover all crates depending on \texttt{ratatui}
\item
  Enrich them with crates.io metadata
\item
  Cache results for fast incremental runs
\item
  Output a unified dataset usable by:

  \begin{itemize}
  \tightlist
  \item
    \texttt{ratcrate-cli}
  \item
    \texttt{ratcrate-tui}
  \item
    \texttt{ratcrate-web}
  \end{itemize}
\end{itemize}

\section{Placeholder: Photo / Architecture
Sketch}\label{placeholder-photo-architecture-sketch}

\section{\texorpdfstring{\href{}{architecture}}{architecture}}\label{architecture}

\chapter{02-overview}\label{overview-1}

\chapter{Chapter 2 --- Project
Overview}\label{chapter-2-project-overview}

\section{What ratcrate-core Does}\label{what-ratcrate-core-does}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Reads the crates.io sparse index
\item
  Identifies crates that depend on \texttt{ratatui}
\item
  Fetches metadata from the crates.io HTTP API
\item
  Applies intelligent multi-day caching
\item
  Produces the final \texttt{ratcrate.json} dataset
\end{enumerate}

\section{High-Level Pipeline}\label{high-level-pipeline}

\includegraphics[width=5.48in,height=7.8in]{rat-core/02-overview_files/figure-latex/mermaid-figure-1.png}

\section{Inputs and Outputs}\label{inputs-and-outputs}

\section{\texorpdfstring{\textbf{Input:}}{Input:}}\label{input}

\begin{itemize}
\item
  Local clone of crates.io sparse index
\item
  Crates.io HTTP API
\end{itemize}

\section{\texorpdfstring{\textbf{Output:}}{Output:}}\label{output}

\texttt{output/ratcrate.json}

\section{Screenshot running the tool}\label{screenshot-running-the-tool}

\chapter{03-architecture}\label{architecture-1}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Chapter 3 --- Architecture
Overview}\label{chapter-3-architecture-overview}

\texttt{ratcrate-core} consists of the following modules:

\begin{Shaded}
\begin{Highlighting}[]

\SpecialStringTok{{-}   }\NormalTok{main.rs}
\SpecialStringTok{{-}   }\NormalTok{sparse\_parser.rs}
\SpecialStringTok{{-}   }\NormalTok{crates\_client.rs}
\SpecialStringTok{{-}   }\NormalTok{index\_cache.rs}
\SpecialStringTok{{-}   }\NormalTok{crate\_cache.rs}
\SpecialStringTok{{-}   }\NormalTok{state.rs}
\SpecialStringTok{{-}   }\NormalTok{json\_generator.rs}
\SpecialStringTok{{-}   }\NormalTok{types.rs}
\end{Highlighting}
\end{Shaded}

\section{Architecture Diagram}\label{architecture-diagram}

\includegraphics[width=3.79in,height=6.15in]{rat-core/03-architecture_files/figure-latex/mermaid-figure-1.png}

\section{Component Responsibilities}\label{component-responsibilities}

\texttt{sparse\_parser.rs} - {[} {]} Scans crates.io sparse index - {[}
{]} Extracts latest versions depending on ratatui

\texttt{index\_cache.rs}

\begin{itemize}
\item[$\square$]
  Remembers version + last\_checked
\item[$\square$]
  Drives fetch/skip logic
\end{itemize}

\texttt{crate\_cache.rs}

\begin{itemize}
\item[$\square$]
  Stores full CratePackage metadata
\item[$\square$]
  Used for cache hits
\end{itemize}

\texttt{crates\_client.rs}

\begin{itemize}
\item[$\square$]
  HTTP client for crates.io
\item[$\square$]
  Handles retries and rate limits
\end{itemize}

\texttt{state.rs}

\begin{itemize}
\item[$\square$]
  Stores run progress
\item[$\square$]
  Supports resume
\end{itemize}

\texttt{json\_generator.rs}

\begin{itemize}
\tightlist
\item[$\square$]
  Builds final dataset and writes atomically
\end{itemize}

\chapter{04-sparse-index}\label{sparse-index}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Chapter 4 --- Sparse Index
Parsing}\label{chapter-4-sparse-index-parsing}

The crates.io sparse index is a massive tree of directories where each
file contains \textbf{line-delimited JSON}, one line per version.

\section{Example Entry}\label{example-entry}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}\DataTypeTok{"name"}\FunctionTok{:}\StringTok{"a{-}tui{-}tool"}\FunctionTok{,}\DataTypeTok{"vers"}\FunctionTok{:}\StringTok{"0.4.1"}\FunctionTok{,}\DataTypeTok{"deps"}\FunctionTok{:}\OtherTok{[}\FunctionTok{\{}\DataTypeTok{"name"}\FunctionTok{:}\StringTok{"ratatui"}\FunctionTok{\}}\OtherTok{]}\FunctionTok{,}\DataTypeTok{"yanked"}\FunctionTok{:}\KeywordTok{false}\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\section{What ratcrate-core Extracts}\label{what-ratcrate-core-extracts}

\begin{itemize}
\item
  Latest non-yanked version
\item
  Dependency list â†’ look for \texttt{"name"}: \texttt{"ratatui"}
\end{itemize}

\section{Algorithm Summary}\label{algorithm-summary}

\begin{itemize}
\item
  Walk the directory tree
\item
  For each file:

  \begin{itemize}
  \tightlist
  \item
    Read line by line
  \item
    Parse as JSON
  \item
    Skip yanked versions
  \item
    If any version depends on ratatui â†’ track latest version
  \end{itemize}
\end{itemize}

Placeholder: Code snippet screenshot

\chapter{05-caching}\label{caching}

\chapter{05-caching.qmd}\label{caching.qmd}

\chapter{Chapter 5 --- Intelligent Multi-Day
Caching}\label{chapter-5-intelligent-multi-day-caching}

Unlike ETag-based caching (crates.io does not support ETags),
ratcrate-core uses a custom two-level caching strategy.

\section{1. Index Cache}\label{index-cache}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
  \DataTypeTok{"a{-}tui{-}tool"}\FunctionTok{:} \FunctionTok{\{}
    \DataTypeTok{"latest\_version"}\FunctionTok{:} \StringTok{"0.4.1"}\FunctionTok{,}
    \DataTypeTok{"last\_checked"}\FunctionTok{:} \StringTok{"2025{-}11{-}28T08:00:00Z"}
  \FunctionTok{\}}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\section{2. Metadata Cache}\label{metadata-cache}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
  \DataTypeTok{"a{-}tui{-}tool"}\FunctionTok{:} \FunctionTok{\{}
    \DataTypeTok{"name"}\FunctionTok{:} \StringTok{"a{-}tui{-}tool"}\FunctionTok{,}
    \DataTypeTok{"version"}\FunctionTok{:} \StringTok{"0.4.1"}\FunctionTok{,}
    \DataTypeTok{"downloads"}\FunctionTok{:} \DecValTok{4533}
  \FunctionTok{\}}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\subsection{Fetch/Skip Logic}\label{fetchskip-logic}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{if}\NormalTok{ (}\KeywordTok{crate}\NormalTok{ not }\KeywordTok{in}\NormalTok{ index\_cache) â†’ FETCH}
\ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ (version changed) â†’ FETCH}
\ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ (now }\OperatorTok{{-}}\NormalTok{ last\_checked }\OperatorTok{\textless{}}\NormalTok{ 24h) â†’ SKIP}
\ControlFlowTok{else}\NormalTok{ â†’ FETCH (stale)}
\end{Highlighting}
\end{Shaded}

Placeholder: Cache hit/miss screenshots

\chapter{06-http-client}\label{http-client}

\chapter{Chapter 6 --- Crates.io HTTP
Client}\label{chapter-6-crates.io-http-client}

The HTTP client handles: - Building URLs - Retrying failures -
Rate-limit handling (429) - Deserializing responses

\section{Retry Logic}\label{retry-logic}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{match}\NormalTok{ response}\OperatorTok{.}\NormalTok{status() }\OperatorTok{\{}
    \DecValTok{429} \OperatorTok{=\textgreater{}}\NormalTok{ wait retry}\OperatorTok{{-}}\NormalTok{after or 60s}
\NormalTok{    5xx }\OperatorTok{=\textgreater{}}\NormalTok{ exponential backoff}
\NormalTok{    \_ }\OperatorTok{=\textgreater{}}\NormalTok{ success}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

Placeholder: Code snippet screenshot

\chapter{07-state-management}\label{state-management}

\chapter{Chapter 7 --- State Management \&
Resume}\label{chapter-7-state-management-resume}

To support long runs (sometimes \textgreater30 minutes), progress is
saved in:

\section{\texorpdfstring{\texttt{cache/progress.json}}{cache/progress.json}}\label{cacheprogress.json}

\subsection{Stored Fields}\label{stored-fields}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
  \DataTypeTok{"processed\_crates"}\FunctionTok{:} \DecValTok{53}\FunctionTok{,}
  \DataTypeTok{"total\_crates"}\FunctionTok{:} \DecValTok{120}\FunctionTok{,}
  \DataTypeTok{"last\_processed\_crate"}\FunctionTok{:} \StringTok{"cool{-}tui{-}app"}\FunctionTok{,}
  \DataTypeTok{"partial\_data"}\FunctionTok{:} \FunctionTok{\{} \ErrorTok{...} \FunctionTok{\}}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

\section{Resume Behavior}\label{resume-behavior}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{{-}{-}resume â†’ continue scan  }
\NormalTok{{-}{-}force{-}fresh â†’ ignore progress file}
\end{Highlighting}
\end{Shaded}

Placeholder: progress.json screenshot

\chapter{08-json-output}\label{json-output}

\chapter{Chapter 8 --- Final JSON
Output}\label{chapter-8-final-json-output}

\texttt{ratcrate.json} is the central dataset for all future projects:

\begin{itemize}
\tightlist
\item
  ratcrate-cli
\item
  ratcrate-tui
\item
  ratcrate-web
\end{itemize}

\section{Structure}\label{structure}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\{}
  \DataTypeTok{"metadata"}\FunctionTok{:} \FunctionTok{\{}\ErrorTok{...}\FunctionTok{\},}
  \DataTypeTok{"statistics"}\FunctionTok{:} \FunctionTok{\{}\ErrorTok{...}\FunctionTok{\},}
  \DataTypeTok{"crates"}\FunctionTok{:} \OtherTok{[}\ErrorTok{...}\OtherTok{]}
\FunctionTok{\}}
\end{Highlighting}
\end{Shaded}

Placeholder: sample JSON screenshot

\chapter{09-workflow-diagram}\label{workflow-diagram}

\chapter{Chapter 9 --- Full Workflow
Diagram}\label{chapter-9-full-workflow-diagram}

\section{Technical Workflow Diagram}\label{technical-workflow-diagram}

\includegraphics[width=25.13in,height=5.33in]{rat-core/09-workflow-diagram_files/figure-latex/mermaid-figure-1.png}

Placeholder: Image version of diagram

\chapter{10-code-snippets}\label{code-snippets}

\chapter{Chapter 10 --- Important Code
Snippets}\label{chapter-10-important-code-snippets}

\section{Parsing Sparse Index Line}\label{parsing-sparse-index-line}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{let}\NormalTok{ entry}\OperatorTok{:}\NormalTok{ SparseIndexEntry }\OperatorTok{=} \PreprocessorTok{serde\_json::}\NormalTok{from\_str(line)}\OperatorTok{?;}
\ControlFlowTok{if}\NormalTok{ new }\KeywordTok{crate}\NormalTok{ or version changed or stale }\OperatorTok{\{}
\NormalTok{    fetch}
\OperatorTok{\}} \ControlFlowTok{else} \OperatorTok{\{}
    \KeywordTok{use}\NormalTok{ cached metadata}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\section{Atomic Write}\label{atomic-write}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{let}\NormalTok{ tmp }\OperatorTok{=}\NormalTok{ path}\OperatorTok{.}\NormalTok{with\_extension(}\StringTok{"tmp"}\NormalTok{)}\OperatorTok{;}
\PreprocessorTok{fs::}\NormalTok{write(}\OperatorTok{\&}\NormalTok{tmp}\OperatorTok{,}\NormalTok{ data)}\OperatorTok{?;}
\PreprocessorTok{fs::}\NormalTok{rename(}\OperatorTok{\&}\NormalTok{tmp}\OperatorTok{,} \OperatorTok{\&}\NormalTok{path)}\OperatorTok{?;}
\end{Highlighting}
\end{Shaded}

Placeholder: Add screenshots of code later

\chapter{11-future-work}\label{future-work}

\chapter{Chapter 11 --- Future Work}\label{chapter-11-future-work}

\section{Planned}\label{planned}

\begin{itemize}
\tightlist
\item
  GitHub API integration for stars/forks/issues
\item
  Semantic version sorting (true semver)
\item
  Cache analytics dashboard
\item
  Parallel fetching (with rate-limit protection)
\item
  WebAssembly build for browser-based scanning
\item
  Plugin system for community extensions
\end{itemize}

\section{Placeholder: Roadmap
graphic}\label{placeholder-roadmap-graphic}

\chapter{12-contributing}\label{contributing}

\chapter{Chapter 12 --- Contributing}\label{chapter-12-contributing}

This project will be open-sourced later.\\
Contributions are welcome after the public release.

\section{Guidelines}\label{guidelines}

\begin{itemize}
\tightlist
\item
  Write small, atomic PRs\\
\item
  Include tests for new logic\\
\item
  Add/update documentation\\
\item
  Follow Rust formatting and linting
\end{itemize}

\section{Placeholder: Contribution workflow
diagram}\label{placeholder-contribution-workflow-diagram}

\chapter{13-usage-examples}\label{usage-examples}

\chapter{Chapter 13 --- Usage \&
Examples}\label{chapter-13-usage-examples}

This chapter provides practical examples of how to run
\texttt{ratcrate-core}, how to inspect its output, and how to
troubleshoot common workflows.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{1. Basic Usage}\label{basic-usage}

\subsection{Clone the crates.io sparse
index}\label{clone-the-crates.io-sparse-index}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{git}\NormalTok{ clone https://github.com/rust{-}lang/crates.io{-}index.git sparse{-}index}
\end{Highlighting}
\end{Shaded}

\subsection{1. Run ratcrate-core}\label{run-ratcrate-core}

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{cargo}\NormalTok{ run }\AttributeTok{{-}{-}} \AttributeTok{{-}s}\NormalTok{ sparse{-}index}
\end{Highlighting}
\end{Shaded}

This will:

\begin{itemize}
\tightlist
\item
  Scan the sparse index
\item
  Identify crates depending on ratatui
\item
  Fetch crates.io metadata
\item
  Save caches to cache/
\item
  Produce: output/ratcrate.json
\end{itemize}

\subsection{2. Using a Sample Index for Faster
Testing}\label{using-a-sample-index-for-faster-testing}

Useful when building or debugging:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sample{-}index/}
\NormalTok{  a/}
\NormalTok{    a/}
\NormalTok{      a}
\end{Highlighting}
\end{Shaded}

Run:

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{$}\OperatorTok{\textgreater{}}\NormalTok{ cargo }\ExtensionTok{run} \AttributeTok{{-}{-}} \AttributeTok{{-}s}\NormalTok{ sample{-}index}
\end{Highlighting}
\end{Shaded}

\subsection{3. Viewing the Output JSON}\label{viewing-the-output-json}

Pretty-print with `jq

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{$}\OperatorTok{\textgreater{}}\NormalTok{ jq }\StringTok{\textquotesingle{}.\textquotesingle{}}\NormalTok{ output/ratcrate.json}
\end{Highlighting}
\end{Shaded}

\subsection{4. View downloads for the top 10
crates}\label{view-downloads-for-the-top-10-crates}

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{$}\OperatorTok{\textgreater{}}\NormalTok{ jq }\StringTok{\textquotesingle{}.crates | sort\_by(.downloads) | reverse | .[0:10]\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\subsection{5. Find crates without a repository
URL}\label{find-crates-without-a-repository-url}

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{$}\OperatorTok{\textgreater{}}\NormalTok{ jq }\StringTok{\textquotesingle{}.crates[] | select(.repository == null) | .name\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\subsection{4. Quick Code Examples}\label{quick-code-examples}

\subsubsection{Load ratcrate.json in
Rust}\label{load-ratcrate.json-in-rust}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{use} \PreprocessorTok{std::}\NormalTok{fs}\OperatorTok{;}

\KeywordTok{fn}\NormalTok{ main() }\OperatorTok{\{}
    \KeywordTok{let}\NormalTok{ data }\OperatorTok{=} \PreprocessorTok{fs::}\NormalTok{read\_to\_string(}\StringTok{"output/ratcrate.json"}\NormalTok{)}\OperatorTok{.}\NormalTok{unwrap()}\OperatorTok{;}
    \KeywordTok{let}\NormalTok{ parsed}\OperatorTok{:} \PreprocessorTok{ratcrate\_core::}\NormalTok{CratesData }\OperatorTok{=} \PreprocessorTok{serde\_json::}\NormalTok{from\_str(}\OperatorTok{\&}\NormalTok{data)}\OperatorTok{.}\NormalTok{unwrap()}\OperatorTok{;}
    \PreprocessorTok{println!}\NormalTok{(}\StringTok{"\{:\#?\}"}\OperatorTok{,}\NormalTok{ parsed}\OperatorTok{.}\NormalTok{metadata}\OperatorTok{.}\NormalTok{statistics)}\OperatorTok{;}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\subsubsection{Load ratcrate.json in
Python}\label{load-ratcrate.json-in-python}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ json}

\ControlFlowTok{with} \BuiltInTok{open}\NormalTok{(}\StringTok{"output/ratcrate.json"}\NormalTok{) }\ImportTok{as}\NormalTok{ f:}
\NormalTok{    data }\OperatorTok{=}\NormalTok{ json.load(f)}

\BuiltInTok{print}\NormalTok{(}\StringTok{"Total crates:"}\NormalTok{, }\BuiltInTok{len}\NormalTok{(data[}\StringTok{"crates"}\NormalTok{]))}
\end{Highlighting}
\end{Shaded}

\subsection{5. Tips}\label{tips}

Always clone the sparse index with full depth (no partial clones).

Use CRATES\_IO\_TOKEN for fewer rate limits.

Run daily or weekly for incremental updates.

\subsection{Placeholder: Screenshots}\label{placeholder-screenshots}

Screenshot: running cargo run -- -s sparse-index

Screenshot: ratcrate.json preview

Screenshot: jq queries

\chapter{14-testing-and-quality}\label{testing-and-quality}

\chapter{Testing and Quality}\label{testing-and-quality-1}

This chapter documents the testing strategy, recommended practices, and
future improvements for ensuring quality in \texttt{ratcrate-core}.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{1. Testing Philosophy}\label{testing-philosophy}

The tool processes large amounts of data and interacts with remote APIs.
Testing focuses on:

\begin{itemize}
\tightlist
\item
  \textbf{Correctness of parsing} (sparse index)
\item
  \textbf{Correctness of caching logic}
\item
  \textbf{Robustness of HTTP client}
\item
  \textbf{Consistency of final JSON output}
\item
  \textbf{Resume functionality}
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{2. Unit Tests}\label{unit-tests}

\subsection{2.1. Sparse Index Parsing}\label{sparse-index-parsing}

Use a fake index file:

\begin{Shaded}
\begin{Highlighting}[]
\AttributeTok{\#[}\NormalTok{test}\AttributeTok{]}
\KeywordTok{fn}\NormalTok{ test\_sparse\_entry\_parsing() }\OperatorTok{\{}
    \KeywordTok{let}\NormalTok{ data }\OperatorTok{=} \StringTok{r\#"}
\StringTok{\{"name":"a","vers":"0.1.0","deps":[\{"name":"ratatui"\}],"yanked":false\}}
\StringTok{\{"name":"a","vers":"0.1.1","deps":[\{"name":"serde"\}],"yanked":false\}}
\StringTok{"\#}\OperatorTok{;}

    \CommentTok{// write to temp file and parse}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\subsection{2.2. Index Cache}\label{index-cache-1}

\begin{Shaded}
\begin{Highlighting}[]
\AttributeTok{\#[}\NormalTok{test}\AttributeTok{]}
\KeywordTok{fn}\NormalTok{ test\_index\_cache\_update() }\OperatorTok{\{}
    \KeywordTok{let} \KeywordTok{mut}\NormalTok{ cache }\OperatorTok{=} \PreprocessorTok{IndexCache::}\NormalTok{new(temp\_path)}\OperatorTok{;}
\NormalTok{    cache}\OperatorTok{.}\NormalTok{update(}\StringTok{"crate"}\OperatorTok{.}\NormalTok{into()}\OperatorTok{,} \StringTok{"1.0.0"}\OperatorTok{.}\NormalTok{into()}\OperatorTok{,} \PreprocessorTok{Utc::}\NormalTok{now())}\OperatorTok{;}
    \PreprocessorTok{assert\_eq!}\NormalTok{(cache}\OperatorTok{.}\NormalTok{len()}\OperatorTok{,} \DecValTok{1}\NormalTok{)}\OperatorTok{;}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\subsection{2.3. Metadata Cache}\label{metadata-cache-1}

Ensure it serializes/deserializes cleanly.

\section{3. Manual Testing}\label{manual-testing}

\subsection{3.1. Small Synthetic Index}\label{small-synthetic-index}

\begin{itemize}
\tightlist
\item[$\square$]
  Place 3--5 crates in a folder.
\item[$\square$]
  Helpful for debugging edge cases.
\end{itemize}

\subsection{3.2. Production Index Dry
Run}\label{production-index-dry-run}

Run with full sparse index but stop after 10 crates (TODO option).

\section{4. Future Automated Testing
Goals}\label{future-automated-testing-goals}

\begin{itemize}
\tightlist
\item
  Mock crates.io server (via httptest or wiremock-rs)
\item
  Add snapshot tests for ratcrate.json
\item
  Add schema validation tests
\item
  Add a GitHub Actions CI pipeline:

  \begin{itemize}
  \tightlist
  \item
    Formatting (\texttt{cargo\ fmt})
  \item
    Lints (\texttt{cargo\ clippy\ -\/-\ -D\ warnings})
  \item
    Tests (\texttt{cargo\ test})
  \end{itemize}
\end{itemize}

\section{Placeholder: Test output
screenshots}\label{placeholder-test-output-screenshots}

Screenshot: cargo test Screenshot: failing sparse index parse
Screenshot: cache behavior test

\chapter{15-Performance-and-Scaling}\label{performance-and-scaling}

\chapter{\texorpdfstring{ðŸ“˜
\textbf{15-performance-and-scaling.qmd}}{ðŸ“˜ 15-performance-and-scaling.qmd}}\label{performance-and-scaling.qmd}

This chapter covers how \texttt{ratcrate-core} performs today and how it
will scale with the expanding Ratatui ecosystem.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{1. First-Run vs Cached-Runs}\label{first-run-vs-cached-runs}

\subsection{Cold Run (no caches)}\label{cold-run-no-caches}

\begin{itemize}
\tightlist
\item
  Full sparse index scan\\
\item
  50--200+ crates depending on Ratatui\\
\item
  All crates.io metadata fetched\\
\item
  \textasciitilde100 seconds typical
\end{itemize}

\subsection{Warm Run (caches present)}\label{warm-run-caches-present}

\begin{itemize}
\tightlist
\item
  Reads sparse index again\\
\item
  But \textbf{0 HTTP calls}\\
\item
  \textasciitilde5 seconds typical
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{2. Where Time is Spent}\label{where-time-is-spent}

\subsection{Sparse Index Parsing}\label{sparse-index-parsing-1}

\begin{quote}
Disk IO bound\\
Many small files
\end{quote}

\subsection{Crates.io API}\label{crates.io-api}

\begin{quote}
Network bound\\
Rate-limited (1 request/sec recommended)
\end{quote}

\subsection{JSON Serialization}\label{json-serialization}

\begin{quote}
Negligible compared to above
\end{quote}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{3. Current Optimizations}\label{current-optimizations}

\begin{itemize}
\tightlist
\item
  Incremental caching\\
\item
  Only fetches metadata if:

  \begin{itemize}
  \tightlist
  \item
    New crate
  \item
    New version
  \item
    Stale (\textgreater24h)
  \end{itemize}
\item
  Atomic writes to avoid corruption\\
\item
  Resume support to avoid wasted work
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{4. Future Optimization Ideas}\label{future-optimization-ideas}

\begin{itemize}
\tightlist
\item
  Parallel sparse index scanning\\
\item
  Batch HTTP calls (crates.io API doesn't support this yet)\\
\item
  Persistent HTTP connections\\
\item
  Compression for cached JSON\\
\item
  Local SQLite cache instead of JSON files
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Placeholder: Benchmark
Figures}\label{placeholder-benchmark-figures}

\begin{itemize}
\tightlist
\item[$\square$]
  Screenshot: cold run timings\\
\item[$\square$]
  Screenshot: warm run timings\\
\item[$\square$]
  Screenshot: flamegraph (future work)
\end{itemize}

\chapter{16-Troubleshooting-FAQ}\label{troubleshooting-faq}

\chapter{Troubleshooting \& FAQ}\label{troubleshooting-faq-1}

\section{1. Common Issues}\label{common-issues}

\subsection{\texorpdfstring{â—
\texttt{Sparse\ index\ directory\ not\ found}}{â— Sparse index directory not found}}\label{sparse-index-directory-not-found}

Make sure you cloned it properly:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{git}\NormalTok{ clone https://github.com/rust{-}lang/crates.io{-}index.git sparse{-}index}
\end{Highlighting}
\end{Shaded}

\subsection{â— 429 Too Many Requests}\label{too-many-requests}

Solutions:

\begin{itemize}
\tightlist
\item
  Use an authenticated token:
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\VariableTok{CRATES\_IO\_TOKEN}\OperatorTok{=\textless{}}\NormalTok{token}\OperatorTok{\textgreater{}}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  Reduce frequency of runs
\item
  Let caches handle daily refreshes
\end{itemize}

\subsection{â— Failed to parse cache}\label{failed-to-parse-cache}

Fix:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{rm}\NormalTok{ cache/index\_cache.json}
\FunctionTok{rm}\NormalTok{ cache/crates\_cache.json}
\ExtensionTok{cargo}\NormalTok{ run }\AttributeTok{{-}{-}} \AttributeTok{{-}s}\NormalTok{ sparse{-}index}
\end{Highlighting}
\end{Shaded}

\subsection{â— Resume not working}\label{resume-not-working}

Use:

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{cargo}\NormalTok{ run }\AttributeTok{{-}{-}} \AttributeTok{{-}s}\NormalTok{ sparse{-}index }\AttributeTok{{-}{-}force{-}fresh}
\end{Highlighting}
\end{Shaded}

\section{2. FAQ}\label{faq}

\subsection{ðŸ’¬ Why is the first run
slow?}\label{why-is-the-first-run-slow}

Because it fetches metadata for all crates depending on Ratatui.

Subsequent runs are extremely fast.

\subsection{ðŸ’¬ Why isn't my crate
included?}\label{why-isnt-my-crate-included}

Possible reasons: It doesn't depend on ratatui It uses optional
dependency incorrectly It has only yanked versions with that dependency

\subsection{ðŸ’¬ How often should I run
this?}\label{how-often-should-i-run-this}

Daily or weekly.

\subsection{ðŸ’¬ Will the JSON format
change?}\label{will-the-json-format-change}

Minor changes are possible. The schema chapter documents stable and
unstable fields.

\section{Placeholder: Error
screenshots}\label{placeholder-error-screenshots}

Screenshot: 429 error

Screenshot: parse error

Screenshot: missing sparse index

\chapter{17-data-schema-Reference}\label{data-schema-reference}

\chapter{ðŸ“˜ Chapter 17 --- Data Schema
Reference}\label{chapter-17-data-schema-reference}

This chapter defines the structure of the final \texttt{ratcrate.json}
output.

\chapter{\# 1. Top-Level Structure}\label{top-level-structure}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{\{}
\NormalTok{  "metadata": \{ ... \},}
\NormalTok{  "statistics": \{ ... \},}
\NormalTok{  "crates": [ ... ]}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\section{Data Schema Reference}\label{data-schema-reference-1}

\section{Formal specification of
ratcrate.json:}\label{formal-specification-of-ratcrate.json}

\begin{itemize}
\tightlist
\item
  Fields in metadata
\item
  Fields in statistics
\item
  Fields in each crate entry (CratePackage)
\end{itemize}

\section{Example entry annotated}\label{example-entry-annotated}

\begin{Shaded}
\begin{Highlighting}[]

\NormalTok{\{}
\NormalTok{  "name": "awesome{-}tui",}
\NormalTok{  "version": "0.4.1",}
\NormalTok{  "downloads": 12345,        // total downloads from crates.io}
\NormalTok{  "recent\_downloads": 321,   // last 90 days}
\NormalTok{  "repository": "...",       // GitHub / git URL}
\NormalTok{  "homepage": "...",}
\NormalTok{  "documentation": "...",}
\NormalTok{  "categories": ["tui", "terminal"],}
\NormalTok{  "is\_core\_library": false}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\chapter{2. metadata Section}\label{metadata-section}

\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Field & Type & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
generated\_at & string & ISO TImestamp \\
version & string & ratcrate-core version \\
sources & array & e.g.~{[}``sparse\_index'',``crates\_io\_api''{]} \\
\end{longtable}

\chapter{3. statistics Section}\label{statistics-section}

\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Field & Type & Description \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
total\_crates & number & Count of discovered crates \\
core\_libraries & number & Ratatui core crates \\
community\_packages & number & All others \\
cache\_hits & number & Metadata reused \\
cache\_misses & number & Metadata fetched \\
\end{longtable}

\chapter{\texorpdfstring{4. \texttt{crates{[}{]}} Entry
Format}{4. crates{[}{]} Entry Format}}\label{crates-entry-format}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{\{}
\NormalTok{  "name": "awesome{-}tui",}
\NormalTok{  "version": "0.3.1",}
\NormalTok{  "downloads": 12345,}
\NormalTok{  "recent\_downloads": 234,}
\NormalTok{  "repository": "https://github.com/...",}
\NormalTok{  "homepage": "...",}
\NormalTok{  "documentation": "...",}
\NormalTok{  "categories": ["tui"],}
\NormalTok{  "description": "...",}
\NormalTok{  "is\_core\_library": false,}
\NormalTok{  "ratatui\_dependency": \{}
\NormalTok{    "requires": "\^{}0.28",}
\NormalTok{    "optional": false}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\chapter{5. Schema Stability}\label{schema-stability}

\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Field & Stability \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
name & stable \\
version & stable \\
downloads & stable \\
recent\_downloads & stable \\
description & stable \\
metadata.statistics & stable \\
is\_core\_library & may evolve \\
ratatui\_dependency & may evolve \\
\end{longtable}

\chapter{6. JSON Schema (Optional
Future)}\label{json-schema-optional-future}

Define as \texttt{ratcrate-schema.json}.

Placeholder: JSON validator screenshots

\chapter{18-Ecosystem-and-Integration}\label{ecosystem-and-integration}

\chapter{ðŸ“˜ Chapter 18 --- Ecosystem \&
Integrations}\label{chapter-18-ecosystem-integrations}

\chapter{Ecosystem and Integration}\label{ecosystem-and-integration-1}

\texttt{ratcrate-core} is the foundation for multiple future tools.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{1. Planned Tools}\label{planned-tools}

\subsection{ðŸŸ¦ ratcrate-cli}\label{ratcrate-cli-1}

A simple command-line browser for Ratatui crates.

\subsection{ðŸŸ¥ ratcrate-tui}\label{ratcrate-tui}

A terminal UI (written in Ratatui) for searching and exploring packages.

\subsection{ðŸŸ© ratcrate-web}\label{ratcrate-web}

A frontend-only web interface (React/Svelte/Leptos/Vanilla JS) that
loads\\
\texttt{ratcrate.json} directly and provides:

\begin{itemize}
\tightlist
\item
  fuzzy search\\
\item
  filtering\\
\item
  stats\\
\item
  crate pages\\
\item
  graphs
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{2. Data Flow Diagram}\label{data-flow-diagram}

\includegraphics[width=3.92in,height=2.9in]{rat-core/18-ecosystem-and-integrations_files/figure-latex/mermaid-figure-1.png}

\includegraphics[width=3.92in,height=2.9in]{rat-core/18-ecosystem-and-integrations_files/figure-latex/mermaid-figure-2.png}

\section{3. Interoperability Contract}\label{interoperability-contract}

\begin{itemize}
\item
  \texttt{ratcrate.json} must remain machine-readable
\item
  Consumers should handle:

  \begin{itemize}
  \item
    new fields
  \item
    optional fields
  \item
    schema expansions
  \end{itemize}
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{4. Ideas for Integrations}\label{ideas-for-integrations}

\begin{itemize}
\item
  Integrate GitHub API (stars, forks, issues)
\item
  Weekly diff report via GitHub Actions
\item
  ``Trending crates'' widget for ratatui.dev
\item
  Add badges (``Top Ratatui Crate'')
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Placeholder: ecosystem
diagram}\label{placeholder-ecosystem-diagram}

\part{rat-cli}

\chapter{Introduction}\label{introduction}

\chapter{\texorpdfstring{The \texttt{ratcrate-cli}
Project}{The ratcrate-cli Project}}\label{the-ratcrate-cli-project}

\texttt{ratcrate} is a highly efficient command-line interface (CLI)
application written in \textbf{Rust} designed to be the primary tool for
discovering, searching, and managing packages within the rapidly growing
\textbf{Ratatui (Terminal User Interface) ecosystem}.

The project's goal is to provide developers with instant,
terminal-native access to up-to-date crate information, bypassing the
need to browse websites.

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{rat-cli/images/ratcrate-cli-demo-small.gif}}

}

\caption{Demo}

\end{figure}%

\section{Key Features}\label{key-features}

\begin{itemize}
\tightlist
\item
  \textbf{Offline Access:} Intelligent caching ensures that data is only
  downloaded when stale (older than 1 day) or when a manual refresh is
  requested.
\item
  \textbf{Fuzzy Search:} Filter crates by name or description using the
  \texttt{-q,\ -\/-query} argument.
\item
  \textbf{Interactive Selection:} Integrates seamlessly with the
  external \textbf{\texttt{fzf}} utility for interactive, searchable
  selection (\texttt{-f}).
\item
  \textbf{Statistical Breakdown:} Provides a clear summary of total,
  core, and community crates (\texttt{-t}).
\item
  \textbf{Configurable Display:} Supports both a default colorful list
  view and an optional structured table view.
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Getting Started and Usage}\label{getting-started-and-usage}

\section{Prerequisites}\label{prerequisites}

To build and run \texttt{ratcrate}, you must have the following
installed:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Rust Toolchain:} Install Rust and Cargo via
  \href{https://rustup.rs/}{rustup}.
\item
  \textbf{fzf (Optional):} The fuzzy finder utility is required to use
  the interactive selection mode (\texttt{-f}). Install it via your
  operating system's package manager (e.g.,
  \texttt{sudo\ apt\ install\ fzf} or \texttt{brew\ install\ fzf}).
\end{enumerate}

\section{Building and Running}\label{building-and-running}

Clone the repository (or ensure the files are in one directory) and use
Cargo to build and run the application.

```bash \# Build and run the executable cargo run --release

\chapter{Run with a standard query}\label{run-with-a-standard-query}

cargo run -- -q ``widgets''

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2432}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2432}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2432}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2703}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Flag
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Long
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Type
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\texttt{none} & \texttt{none} & \texttt{none} & Show top 10 crates \\
\texttt{-q} & \texttt{-\/-query} & String & Search term to filter crates
by name or description. \\
\texttt{-t} & \texttt{-\/-total} & \texttt{none} & \textbf{Show total
count} incld. Core vs.~Community \\
\texttt{-l} & \texttt{-\/-limit} & \texttt{usize} & Maximum number of
results to display (default: 10). \\
\texttt{-r} & \texttt{-\/-refresh} & \texttt{none} & Force re-download
of remote data, bypassing the cache check. \\
\texttt{-c} & \texttt{-\/-cache-info} & \texttt{none} & Display the
cache directory and file path \\
\texttt{-f} & \texttt{-\/-fzf} & \texttt{none} & Use \texttt{fzf} for
interactive selection of a crate. \\
none & \texttt{-\/-table} & \texttt{none} & Use the table view (requires
compiling with the \texttt{table} feature). \\
\end{longtable}

\chapter{Usage Demonstration}\label{usage-demonstration}

The following animation illustrates the core capabilities of the tool:
the default listing, searching with a query, and using the interactive
fzf mode.

\chapter{Data Model}\label{data-model}

This module provides the strongly-typed contracts for all data received
from the remote source. This is crucial for Rust's type safety and for
using the \texttt{serde} crate effectively for JSON handling.

\section{\texorpdfstring{\textbf{Key
Structures:}}{Key Structures:}}\label{key-structures}

\begin{itemize}
\item
  \textbf{\texttt{CratePackage}}: Holds all metadata for an individual
  crate (e.g., \texttt{name}, \texttt{downloads},
  \texttt{is\_core\_library}).
\item
  \textbf{\texttt{Metadata}}: Stores global statistics and generation
  information (\texttt{total\_crates}, \texttt{generated\_at},
  \texttt{core\_libraries}, \texttt{community\_packages}).
\item
  \textbf{\texttt{CratesData}}: The root structure containing the
  \texttt{Metadata} and the
  \texttt{Vec\textless{}CratePackage\textgreater{}}.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// types.rs: Metadata Definition}

\AttributeTok{\#[}\NormalTok{derive}\AttributeTok{(}\BuiltInTok{Debug}\OperatorTok{,} \BuiltInTok{Clone}\OperatorTok{,}\NormalTok{ Serialize}\OperatorTok{,}\NormalTok{ Deserialize}\AttributeTok{)]}
\KeywordTok{pub} \KeywordTok{struct}\NormalTok{ Metadata }\OperatorTok{\{}
    \KeywordTok{pub}\NormalTok{ version}\OperatorTok{:} \DataTypeTok{String}\OperatorTok{,}
    \KeywordTok{pub}\NormalTok{ generated\_at}\OperatorTok{:} \DataTypeTok{String}\OperatorTok{,}
    \KeywordTok{pub}\NormalTok{ total\_crates}\OperatorTok{:} \DataTypeTok{usize}\OperatorTok{,}
    \KeywordTok{pub}\NormalTok{ core\_libraries}\OperatorTok{:} \DataTypeTok{usize}\OperatorTok{,}
    \KeywordTok{pub}\NormalTok{ community\_packages}\OperatorTok{:} \DataTypeTok{usize}\OperatorTok{,}
    \CommentTok{// ...}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\section{Data Persistence and
Retrieval}\label{data-persistence-and-retrieval}

This module abstracts the process of fetching and storing data. It
decides whether to serve data from the local filesystem or make an HTTP
request using \texttt{reqwest}.

\subsection{Cache Stale Logic}\label{cache-stale-logic}

The \texttt{is\_cache\_stale()} function determines if the cache needs
an update by checking the modified timestamp of the
\texttt{ratcrate.json} file against the maximum age

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// cache.rs: Cache Stale Check}

\KeywordTok{const}\NormalTok{ CACHE\_MAX\_AGE\_DAYS}\OperatorTok{:} \DataTypeTok{u64} \OperatorTok{=} \DecValTok{1}\OperatorTok{;}

\KeywordTok{pub} \KeywordTok{fn}\NormalTok{ is\_cache\_stale() }\OperatorTok{{-}\textgreater{}} \DataTypeTok{Result}\OperatorTok{\textless{}}\DataTypeTok{bool}\OperatorTok{\textgreater{}} \OperatorTok{\{}
    \CommentTok{// ... logic to check file existence and modified timestamp ...}
    \KeywordTok{let}\NormalTok{ age }\OperatorTok{=} \PreprocessorTok{SystemTime::}\NormalTok{now()}\OperatorTok{.}\NormalTok{duration\_since(modified)}\OperatorTok{?;}
    
    \CommentTok{// Returns true if the cache file is older than 1 day}
    \ConstantTok{Ok}\NormalTok{(age }\OperatorTok{\textgreater{}} \PreprocessorTok{Duration::}\NormalTok{from\_secs(CACHE\_MAX\_AGE\_DAYS }\OperatorTok{*} \DecValTok{24} \OperatorTok{*} \DecValTok{3600}\NormalTok{))}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\subsection{Data Retrieval Flow}\label{data-retrieval-flow}

The public function \texttt{get\_data} orchestrates the data retrieval,
showing status messages to the user.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// cache.rs: get\_data Workflow}

\KeywordTok{pub} \KeywordTok{fn}\NormalTok{ get\_data(force\_refresh}\OperatorTok{:} \DataTypeTok{bool}\NormalTok{) }\OperatorTok{{-}\textgreater{}} \DataTypeTok{Result}\OperatorTok{\textless{}}\NormalTok{CratesData}\OperatorTok{\textgreater{}} \OperatorTok{\{}
    \ControlFlowTok{if}\NormalTok{ force\_refresh }\OperatorTok{\{}
\NormalTok{        download\_fresh\_data()}
    \OperatorTok{\}} \ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ is\_cache\_stale()}\OperatorTok{?} \OperatorTok{\{}
\NormalTok{        download\_fresh\_data() }\CommentTok{// Cache is stale}
    \OperatorTok{\}} \ControlFlowTok{else} \OperatorTok{\{}
\NormalTok{        load\_from\_cache() }\CommentTok{// Cache is fresh}
    \OperatorTok{\}}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\subsection{\texorpdfstring{\texttt{main.rs}: Execution and
Display}{main.rs: Execution and Display}}\label{main.rs-execution-and-display}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// main.rs: Main Function Control Flow Snippet}

\KeywordTok{fn}\NormalTok{ main() }\OperatorTok{{-}\textgreater{}} \DataTypeTok{Result}\OperatorTok{\textless{}}\NormalTok{()}\OperatorTok{\textgreater{}} \OperatorTok{\{}
    \KeywordTok{let}\NormalTok{ args }\OperatorTok{=} \PreprocessorTok{Cli::}\NormalTok{parse()}\OperatorTok{;}
\NormalTok{    print\_banner()}\OperatorTok{;}

    \ControlFlowTok{if}\NormalTok{ args}\OperatorTok{.}\NormalTok{cache\_info }\OperatorTok{\{}
        \ControlFlowTok{return}\NormalTok{ show\_cache\_info()}\OperatorTok{;} \CommentTok{// Exit 1: Cache Info}
    \OperatorTok{\}}

    \KeywordTok{let}\NormalTok{ crates\_data }\OperatorTok{=}\NormalTok{ get\_data(args}\OperatorTok{.}\NormalTok{refresh)}\OperatorTok{?;}

    \ControlFlowTok{if}\NormalTok{ args}\OperatorTok{.}\NormalTok{total }\OperatorTok{\{}
\NormalTok{        display\_total\_crates(}\OperatorTok{\&}\NormalTok{crates\_data}\OperatorTok{.}\NormalTok{metadata)}\OperatorTok{;}
        \ControlFlowTok{return} \ConstantTok{Ok}\NormalTok{(())}\OperatorTok{;} \CommentTok{// Exit 2: Total Stats}
    \OperatorTok{\}}

    \ControlFlowTok{if}\NormalTok{ args}\OperatorTok{.}\NormalTok{fzf }\OperatorTok{\{}
        \ControlFlowTok{if}\NormalTok{ launch\_fzf(}\OperatorTok{...}\NormalTok{) }\OperatorTok{\{}
            \ControlFlowTok{return} \ConstantTok{Ok}\NormalTok{(())}\OperatorTok{;} \CommentTok{// Exit 3: fzf selection successful}
        \OperatorTok{\}}
    \OperatorTok{\}}

    \CommentTok{// Default listing (table or pretty{-}print)}
    \CommentTok{// ...}
    \ConstantTok{Ok}\NormalTok{(())}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\subsection{\texorpdfstring{Interactive \texttt{fzf}
Implementation}{Interactive fzf Implementation}}\label{interactive-fzf-implementation}

The \texttt{launch\_fzf} function interacts with the operating system to
pipe data to the \texttt{fzf} external process.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Crate list is formatted into simplified strings
  (\texttt{name\ â€”\ description\ (downloads)}).
\item
  \texttt{std::process::Command} spawns \texttt{fzf} and pipes the list
  to its standard input (\texttt{stdin}).
\item
  The user selection is read from \texttt{fzf}'s standard output
  (\texttt{stdout}).
\item
  The selected name is used to look up the full \texttt{CratePackage}
  details for display.
\end{enumerate}

This approach minimizes the complexity of managing a custom TUI library
for interaction.

\part{rat-tui}

\chapter{ratcrate-tui: Ratatui Ecosystem
Explorer}\label{ratcrate-tui-ratatui-ecosystem-explorer}

\section{\texorpdfstring{ðŸ“¦ What is
\texttt{ratcrate-tui}?}{ðŸ“¦ What is ratcrate-tui?}}\label{what-is-ratcrate-tui}

\textbf{ratcrates} is a powerful and fast \textbf{Terminal User
Interface (TUI)} application designed to help you discover and manage
crates within the \href{https://ratatui.rs/}{Ratatui} ecosystem. It
provides a seamless, terminal-native experience for navigating lists of
libraries, viewing detailed statistics, and quickly finding the right
package for your project.

Built entirely in Rust, \texttt{ratcrates} is an example of the clean
and efficient TUIs you can build with \texttt{ratatui} itself.

\pandocbounded{\includegraphics[keepaspectratio]{rat-tui/./images/ratcrate-tui.gif}}

\subsection{âœ¨ Key Features}\label{key-features-1}

\begin{itemize}
\tightlist
\item
  \textbf{Instant Access:} Fast data retrieval using local caching,
  ensuring the application is responsive.
\item
  \textbf{Comprehensive Data:} Displays package name, description,
  version, downloads (total and weekly), repository links, and
  categories for every crate.
\item
  \textbf{Smart Filtering:} Quickly switch between showing \textbf{all
  crates}, \textbf{core libraries} only, or various filtered lists like
  \textbf{Top Downloads} or \textbf{Newest}.
\item
  \textbf{Vim-Style Navigation:} Use familiar keys like \texttt{j},
  \texttt{k}, \texttt{Ctrl+d}, \texttt{Ctrl+u}, \texttt{g}, and
  \texttt{G} to move through lists.
\item
  \textbf{Interactive Command Mode:} Execute powerful search and filter
  commands using the \texttt{:} prompt.
\end{itemize}

\subsection{ðŸŽ¯ Ecosystem Goal}\label{ecosystem-goal}

The primary purpose of \texttt{ratcrates} is to make the rich collection
of Ratatui-related crates more accessible and discoverable, promoting
the adoption and growth of the TUI community in Rust.

To get started, checkout the \href{usage.qmd}{usage guide}

\chapter{Usage Guide}\label{usage-guide}

\chapter{\texorpdfstring{ðŸš€ Exploring Crates: The \texttt{ratcrates}
Usage
Guide}{ðŸš€ Exploring Crates: The ratcrates Usage Guide}}\label{exploring-crates-the-ratcrates-usage-guide}

The \texttt{ratcrates} TUI is designed for fast, keyboard-driven
exploration. It features a split-pane layout: the left pane shows the
\textbf{Crate List}, and the right pane shows the \textbf{Detail} view,
\textbf{Statistics} view, or \textbf{Help} view.

\section{Core Interface Layout}\label{core-interface-layout}

The screen is generally divided into three horizontal areas:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Main Content Area (Top):} Split into the Crate List (35\%) and
  the Detail/View pane (65\%).
\item
  \textbf{Status/Command Bar (Bottom):} Displays the current application
  mode, status messages, and command input.
\end{enumerate}

\subsection{Caching Mechanism}\label{caching-mechanism}

\texttt{ratcrates} relies on a local JSON data file, stored in your
system's cache directory (\texttt{\textasciitilde{}/.cache/ratcrate} on
Linux/macOS).

\begin{itemize}
\tightlist
\item
  On startup, it checks if the cache is older than \textbf{1 day}
  (\texttt{CACHE\_MAX\_AGE\_DAYS:\ u64\ =\ 1} in \texttt{src/cache.rs}).
\item
  If stale or missing, it \textbf{automatically downloads} the latest
  data.
\item
  Otherwise, it loads the data from the local cache instantly.
\end{itemize}

\section{âŒ¨ï¸ Controls: Normal Mode}\label{controls-normal-mode}

This is the default mode for navigation.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3333}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3333}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3333}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Keybind
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Action
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\texttt{j} or \texttt{â†“} & Move down & Select the next crate in the
list. \\
\texttt{k} or \texttt{â†‘} & Move up & Select the previous crate in the
list. \\
\texttt{Ctrl+d} & Page down & Jump down by 10 items
(\texttt{jump\ =\ 10}). \\
\texttt{Ctrl+u} & Page up & Jump up by 10 items
(\texttt{jump\ =\ 10}). \\
\texttt{g} & Go to top & Select the first item
(\texttt{list\_state.select(Some(0))}). \\
\texttt{G} & Go to bottom & Select the last item
(\texttt{list\_state.select(Some(len\ -\ 1))}). \\
\texttt{TAB} & Toggle View & Switches between \textbf{List} and
\textbf{Stats} views. \\
\texttt{?} & Toggle Help & Toggles the \textbf{Help} view. \\
\texttt{:} & Enter Command Mode & Begin typing a command. \\
\texttt{/} & Quick Search & Enter Command Mode with \texttt{:search}
pre-typed. \\
\texttt{q} & Quit & Exit the application gracefully. \\
\end{longtable}

\section{ðŸ“Š Views}\label{views}

\subsection{\texorpdfstring{1. List + Detail View
(\texttt{View::List})}{1. List + Detail View (View::List)}}\label{list-detail-view-viewlist}

\begin{itemize}
\tightlist
\item
  \textbf{List Pane:} Shows the crate name, core/community icon
  (\texttt{â­} or \texttt{ðŸ“¦}), total downloads (\texttt{â†“}), and weekly
  downloads (\texttt{ðŸ“ˆ}).
\item
  \textbf{Detail Pane:} Shows full metadata for the currently selected
  crate, including description (with word wrap), version, download
  stats, installation command, and links.
\end{itemize}

\subsection{\texorpdfstring{2. Statistics View
(\texttt{View::Stats})}{2. Statistics View (View::Stats)}}\label{statistics-view-viewstats}

Toggled by pressing \texttt{TAB}. This view aggregates data across all
known crates:

\begin{itemize}
\tightlist
\item
  Total packages, core libraries, and community packages count.
\item
  Total and average downloads.
\item
  A simple bar chart visualizing the core vs.~community distribution.
\item
  The \textbf{Top 5 Most Downloaded} crates.
\end{itemize}

\subsection{\texorpdfstring{3. Help View
(\texttt{View::Help})}{3. Help View (View::Help)}}\label{help-view-viewhelp}

Toggled by pressing \texttt{?}. Provides an on-screen reference for all
keybindings and commands.

\section{âš¡ Commands: Command Mode}\label{commands-command-mode}

Pressing \texttt{:} transitions the TUI into \textbf{Command Mode},
which is indicated by the \texttt{COMMAND} badge in the status bar.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3333}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3333}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3333}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Command
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Arguments
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\texttt{q}, \texttt{quit} & & Exit the application. \\
\texttt{all} & & Resets the list to show all available crates. \\
\texttt{core} & & Filters the list to show only crates marked as a Core
Library (\texttt{is\_core\_library:\ true}). \\
\texttt{top} & \texttt{{[}N{]}} & Filters the list to show the top
\texttt{N} crates ranked by \textbf{Total Downloads}. Default \texttt{N}
is 10. \\
\texttt{recent} & \texttt{{[}N{]}} & Filters the list to show the top
\texttt{N} crates ranked by \textbf{Weekly Downloads}
(\texttt{recent\_downloads}). \\
\texttt{new} & \texttt{{[}N{]}} & Filters the list to show the top
\texttt{N} newest crates (sorted by \texttt{created\_at}). \\
\texttt{search} & \texttt{\textless{}query\textgreater{}} & Filters
crates where the \texttt{name} or \texttt{description} contains the
query string (case-insensitive). \\
\end{longtable}

\subsection{Command Examples}\label{command-examples}

```bash :top 5 \# Show the 5 most downloaded crates :recent 20 \# Show
the 20 crates with the highest weekly downloads :search logging \# Find
crates related to logging /tui-rs \# Quick search for `tui-rs' :core \#
Show only core libraries

\chapter{Development \& Contribution}\label{development-contribution}

\chapter{ðŸ—ï¸ Development \&
Contribution}\label{development-contribution-1}

We welcome and appreciate all forms of contribution, from bug reports
and feature suggestions to code submissions!

\section{Project Structure}\label{project-structure}

The application is structured into a few key Rust modules:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.5000}}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.5000}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
File/Module
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\texttt{src/main.rs} & \textbf{TUI Logic.} Contains the \texttt{App}
state, all TUI rendering (\texttt{ui}, \texttt{render\_list},
\texttt{render\_detail}, etc.), and the event handling loop
(\texttt{handle\_events}). This is where you'll find the Ratatui
code. \\
\texttt{src/cache.rs} & \textbf{Data Layer.} Manages the remote data
fetching (\texttt{download\_fresh\_data}) and local caching
(\texttt{load\_from\_cache}, \texttt{is\_cache\_stale}). Uses
\texttt{reqwest} and \texttt{dirs}. \\
\texttt{src/types.rs} & \textbf{Data Types.} Defines the
\texttt{CratePackage}, \texttt{Metadata}, and \texttt{CratesData}
structs that mirror the remote JSON data structure. Uses
\texttt{serde}. \\
\texttt{Cargo.toml} & Project manifest. Key dependencies are
\texttt{ratatui} (for the TUI framework), \texttt{crossterm} (for
terminal backend), and \texttt{reqwest} (for networking). \\
\end{longtable}

\section{Build \& Test}\label{build-test}

To get your development environment ready:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Clone the repository:}
  \texttt{bash\ \ \ \ \ git\ clone\ {[}https://github.com/rvbug/ratcrates.git{]}(https://github.com/rvbug/ratcrates.git)\ \ \ \ \ cd\ ratcrates}
\item
  \textbf{Run in development mode:} \texttt{bash\ \ \ \ \ cargo\ run}
\item
  \textbf{Run unit tests (mainly for caching):}
  \texttt{bash\ \ \ \ \ cargo\ test}
\end{enumerate}

\section{Contributing Code}\label{contributing-code}

If you have a bug fix or feature you'd like to implement:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Fork} the repository on GitHub.
\item
  \textbf{Create a new branch} for your work:
  \texttt{bash\ \ \ \ \ git\ checkout\ -b\ feature/my-new-feature}
\item
  \textbf{Implement} your changes.
\item
  \textbf{Test} your changes thoroughly.
\item
  \textbf{Commit} your changes using a descriptive commit message (e.g.,
  following the
  \href{https://www.conventionalcommits.org/en/v1.0.0/}{Conventional
  Commits} specification).
  \texttt{bash\ \ \ \ \ git\ commit\ -m\ \textquotesingle{}feat:\ add\ jump\ to\ last\ search\ result\ command\textquotesingle{}}
\item
  \textbf{Push} your branch and open a \textbf{Pull Request} against the
  \texttt{main} branch of the original repository.
\end{enumerate}

\section{Adding New Commands}\label{adding-new-commands}

To add a new command (e.g., \texttt{:mycmd}), you would modify
\texttt{src/main.rs}: Extend \textbf{\texttt{execute\_command}:} Add a
new \texttt{match} arm in the \texttt{execute\_command} function within
the \texttt{App} implementation.

\begin{Shaded}
\begin{Highlighting}[]
    \CommentTok{// In App::execute\_command}
    \ControlFlowTok{match}\NormalTok{ command }\OperatorTok{\{}
        \CommentTok{// ... existing commands}
        \StringTok{"mycmd"} \OperatorTok{=\textgreater{}} \OperatorTok{\{}
            \CommentTok{// Your new command logic goes here}
            \KeywordTok{self}\OperatorTok{.}\NormalTok{status\_message }\OperatorTok{=} \StringTok{"Executed mycmd!"}\OperatorTok{.}\NormalTok{to\_string()}\OperatorTok{;}
        \OperatorTok{\}}
        \CommentTok{// ...}
    \OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  **Update `render\_help`:** Add the new command to the list in the
  `render\_help` function to ensure it appears in the in-app help view.
\end{enumerate}

\part{doc2quarto}

\chapter{Doc2Quarto}\label{doc2quarto-2}

\chapter{Overview}\label{overview-2}

Doc2Quarto is a command-line utility written in Rust designed to
streamline the migration of documentation projects from the
\href{https://docusaurus.io/}{Docusaurus} framework to the
\href{https://quarto.org/}{Quarto} publishing system.

Migrating large documentation sites can be tedious, often requiring
manual adjustments to frontmatter, custom admonition syntax, and
directory structures. Doc2Quarto automates these common, repetitive
transformation tasks, allowing authors to focus on content updates and
Quarto-specific enhancements.

\chapter{Why Doc2Quarto?}\label{why-doc2quarto}

Docusaurus and Quarto both use Markdown, but they differ in crucial
ways:

\section{Frontmatter:}\label{frontmatter}

Docusaurus uses specific YAML fields like sidebar\_position for
navigation, which must be mapped to Quarto's order field.

\section{Admonitions:}\label{admonitions}

Docusaurus uses the :::type Title syntax, while Quarto uses standardized
Markdown Callouts
\texttt{(::::\ \{\textless{}type\textgreater{}\}\ or\ ::::\ \{.callout-\textless{}type\textgreater{}\})}.

\section{File Structure:}\label{file-structure}

Quarto books often use the .qmd extension and rely on a strict file
hierarchy for book rendering.

This utility addresses these differences by providing a quick and
reliable conversion pipeline.

\chapter{Features}\label{features}

Doc2Quarto offers a robust set of features to ensure a smooth
transition:

\begin{itemize}
\item[$\square$]
  Recursive File Conversion: Scans a source directory and processes all
  .md files found recursively.
\item[$\square$]
  Frontmatter Conversion: Automatically maps Docusaurus-specific
  frontmatter (e.g., sidebar\_position) to its Quarto equivalent
  (order).
\item[$\square$]
  Admonition/Callout Transformation: Converts common Docusaurus
  admonition syntaxes \texttt{(:::note,\ :::tip,\ etc.)} into Quarto's
  standard callout blocks.
\item[$\square$]
  Directory Preservation: Maintains the relative directory structure
  from the source to the destination, ensuring internal links remain
  valid.
\item[$\square$]
  Image Folder Copying: Automatically identifies and copies co-located
  img folders used by Docusaurus into the corresponding Quarto
  destination directory.
\item[$\square$]
  Progress Tracking: Provides visual feedback via a progress bar (using
  the indicatif crate) for large documentation sets.
\end{itemize}

\begin{quote}
\subsection{The following chapters detail how to use Doc2Quarto and
provide an in-depth look at its Rust
implementation.}\label{the-following-chapters-detail-how-to-use-doc2quarto-and-provide-an-in-depth-look-at-its-rust-implementation.}
\end{quote}

\chapter{Using the CLI}\label{using-the-cli}

\chapter{Introduction}\label{introduction-1}

The Doc2Quarto utility is designed for straightforward command-line
execution, requiring only the source directory of your existing
Docusaurus documentation and a desired destination directory for the
converted Quarto files.

\chapter{Prerequisites}\label{prerequisites-1}

Doc2Quarto is built with Rust and packaged as a standalone binary. After
installation (e.g., via cargo install), the doc2quarto command will be
available in your system's path.

\chapter{Command Syntax}\label{command-syntax}

The application uses the clap crate for argument parsing, defining two
required arguments: \texttt{-\/-source} and \texttt{-\/-dest}.

The general command structure is:

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{$}\OperatorTok{\textgreater{}}\NormalTok{ doc2quarto }\ExtensionTok{{-}s} \OperatorTok{\textless{}}\NormalTok{SOURCE\_DIR}\OperatorTok{\textgreater{}}\NormalTok{ {-}d }\OperatorTok{\textless{}}\NormalTok{DESTINATION\_DIR}\OperatorTok{\textgreater{}}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2297}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2297}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2297}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.3108}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Option
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Long Name
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Description
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Example
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\texttt{-s} & \texttt{-\/-source} & The directory containing your
Docusaurus \texttt{.md} files (the source docs root). &
\texttt{./my-docusaurus-docs/} \\
\texttt{-d} & \texttt{-\/-dest} & The directory where the converted
\texttt{.qmd} files will be written. This directory will be created if
it does not exist. & \texttt{./quarto-book/chapters/} \\
\texttt{-h} & \texttt{-\/-help} & Print help &
\texttt{doc2-quarto\ â€”help} \\
\texttt{-v} & \texttt{-\/-version} & Prints Version &
\texttt{doc2quarto\ -\/-version} \\
\end{longtable}

\chapter{Example Execution}\label{example-execution}

Imagine your Docusaurus files are in a directory structure like this:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my{-}project/}
\NormalTok{â”œâ”€â”€ docusaurus{-}docs/}
\NormalTok{â”‚   â”œâ”€â”€ intro.md}
\NormalTok{â”‚   â””â”€â”€ guide/}
\NormalTok{â”‚       â”œâ”€â”€ setup.md}
\NormalTok{â”‚       â””â”€â”€ images/}
\NormalTok{â”‚           â””â”€â”€ diagram.png}
\NormalTok{â””â”€â”€ ...}
\end{Highlighting}
\end{Shaded}

To convert these files and place them into a new Quarto book structure:

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{$}\OperatorTok{\textgreater{}}\NormalTok{ doc2quarto }\ExtensionTok{{-}{-}source}\NormalTok{ docusaurus{-}docs }\AttributeTok{{-}{-}dest}\NormalTok{ quarto{-}book/docs}
\end{Highlighting}
\end{Shaded}

\chapter{During Execution}\label{during-execution}

\begin{itemize}
\tightlist
\item
  Validation: The tool checks that docusaurus-docs exists.
\item
  Creation: The destination directory quarto-book/docs is created.
\item
  Discovery: All .md files in docusaurus-docs are found recursively.
\item
  Conversion \& Copying:

  \begin{itemize}
  \tightlist
  \item
    docusaurus-docs/intro.md is converted to quarto-book/docs/intro.qmd.
  \item
    docusaurus-docs/guide/setup.md is converted to
    quarto-book/docs/guide/setup.qmd.
  \item
    The docusaurus-docs/guide/images/ folder is copied to
    quarto-book/docs/guide/images/.
  \end{itemize}
\item
  A progress bar provides visual feedback on the conversion process for
  large projects:
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\ExtensionTok{â„¹}\NormalTok{ Found 25 markdown files}
\ExtensionTok{[âœ“]} \PreprocessorTok{[}\SpecialStringTok{\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}\PreprocessorTok{]}\NormalTok{ 25/25 Processed: setup.md}
\ExtensionTok{Conversion}\NormalTok{ completed!}
\end{Highlighting}
\end{Shaded}

\begin{itemize}
\tightlist
\item
  The resulting Quarto files (.qmd) are then ready to be referenced in
  your main \_quarto.yml file.
\end{itemize}

\chapter{Example \_quarto.yml
configuration}\label{example-_quarto.yml-configuration}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{project:}
\NormalTok{  type: book}
\NormalTok{book:}
\NormalTok{  title: "My Converted Book"}
\NormalTok{  chapters:}
\NormalTok{    {-} index.qmd}
\NormalTok{    {-} docs/intro.qmd}
\NormalTok{    {-} docs/guide/setup.qmd \# Reference the converted files}
\end{Highlighting}
\end{Shaded}

\chapter{Error Handling}\label{error-handling}

Doc2Quarto includes checks for critical errors (as seen in main.rs):

If the source directory (-s) does not exist, the program will exit with
an error.

If no .md files are found in the source directory, the program will
exit.

The creation of the destination directory (-d) is handled gracefully; if
it fails (due to permissions, for example), the program will report the
error.

\chapter{Core Logic}\label{core-logic}

\chapter{Conversion Logic Deep Dive''}\label{conversion-logic-deep-dive}

The core transformation logic of Doc2Quarto resides in the
\texttt{lib.rs} file, primarily within the process\_files and
\texttt{convert\_content} functions. This chapter details how
Docusaurus-specific syntax is systematically mapped to Quarto standards.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Doc2Quarto Architecture
Overview}\label{doc2quarto-architecture-overview}

The tool follows a clear, single-pass pipeline for each file, ensuring
efficient and atomic conversion. The primary goal is to handle the
Markdown content and preserve the file and asset structure.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{The Conversion Pipeline}\label{the-conversion-pipeline}

The \texttt{process\_files} function orchestrates the entire process for
a single file:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Read Content: Reads the source \texttt{.md} file content into a
  \texttt{String}.
\item
  Convert Content: Calls convert\_content to perform the syntax
  transformations.
\item
  Path Calculation: Calculates the relative\_path from the source\_root
  to preserve the file hierarchy.
\item
  Destination Path: Constructs the full dest\_path, ensuring the
  extension is changed from .md to .qmd.
\item
  Directory Setup: Creates any necessary parent directories at the
  destination.
\item
  Write Content: Writes the transformed content to the new .qmd file.
\item
  Image Copying: Calls copy\_img\_folder to handle associated assets.
\end{enumerate}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Frontmatter Transformation}\label{frontmatter-transformation}

The function \texttt{convert\_frontmatter} handles the YAML metadata
block at the top of the file. This is crucial for Quarto to correctly
interpret navigation and chapter order.

\texttt{sidebar\_position} to \texttt{order}

Docusaurus uses sidebar\_position to set the order of documents in a
sidebar:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\# Docusaurus Frontmatter}
\NormalTok{{-}{-}{-}}
\NormalTok{id: intro}
\NormalTok{title: Introduction}
\NormalTok{sidebar\_position: 1}
\NormalTok{{-}{-}{-}}
\end{Highlighting}
\end{Shaded}

Doc2Quarto maps this directly to the Quarto book's order field:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{\# Quarto Frontmatter}
\NormalTok{{-}{-}{-}}
\NormalTok{id: intro}
\NormalTok{title: Introduction}
\NormalTok{order: 1 \# Converted from sidebar\_position}
\NormalTok{{-}{-}{-}}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Admonition/Callout
Transformation}\label{admonitioncallout-transformation}

One of the most significant changes is the conversion of Docusaurus
admonitions (which use a triple-colon syntax) to Quarto's standard
Callout blocks (which use a quadruple-colon syntax with a class
identifier).

The convert\_admonitions function uses a regular expression
(\texttt{Regex::new(r"\^{}:::(\textbackslash{}w)+(.*)\$")}) to identify
the opening tag and extract the type and optional title.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Type Mapping}\label{type-mapping}

\section{Admonitions}\label{admonitions-1}

The conversion logic performs a mapping to ensure Docusaurus types
correctly translate to Quarto's built-in callout types:

\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Docusaurus & Quarto \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\texttt{:::note} & \texttt{::::\ \{note\}} \\
`\texttt{:::tip}` & `\texttt{::::\ \{tip\}}` \\
`\texttt{:::info}` & `\texttt{::::\ \{info\}}` \\
`\texttt{:::caution}` & `\texttt{::::\ \{caution\}}` \\
`\texttt{:::warning}` & `\texttt{::::\ \{warning\}}` \\
`\texttt{:::danger}` & `\texttt{::::\ \{danger\}}` \\
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Example Conversion}\label{example-conversion}

A Docusaurus note with a title:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{:::tip Useful Tip Remember to clear your cache after deployment.}
\NormalTok{:::}
\end{Highlighting}
\end{Shaded}

Is converted by Doc2Quarto into the Quarto syntax:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{::: callout{-}tip}
\FunctionTok{\#\# Useful Tip}
\NormalTok{Remember to clear your cache after deployment.}
\NormalTok{:::}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Asset Handling
(copy\_img\_folder)}\label{asset-handling-copy_img_folder}

Documentation sites heavily rely on images. The
\texttt{copy\_img\_folder} function ensures that any img directory
co-located with a source Markdown file is copied to the exact relative
location in the destination structure. This prevents broken image links,
as the relative paths within the converted .qmd file remain valid.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{// Snippet from lib.rs: }
\CommentTok{// Checks if the \textquotesingle{}img\textquotesingle{} folder exists and copies its contents }

\ControlFlowTok{if}\NormalTok{ img\_folder}\OperatorTok{.}\NormalTok{exists() }\OperatorTok{\&\&}\NormalTok{ img\_folder}\OperatorTok{.}\NormalTok{is\_dir() }
  \OperatorTok{\{} \CommentTok{// ... logic to create destination folder and copy files ... \}}
\end{Highlighting}
\end{Shaded}

This feature is crucial for maintaining the integrity of image
references without requiring manual path adjustments after conversion.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Core Implementation in Rust}\label{core-implementation-in-rust}

The \texttt{lib.rs} file contains the logic that parses and transforms
the Markdown content. Below are key snippets demonstrating how the
conversion works.

\section{The Content Converter}\label{the-content-converter}

This function acts as a state machine to correctly isolate and handle
the YAML frontmatter from the main body content.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{pub} \KeywordTok{fn}\NormalTok{ convert\_content(content}\OperatorTok{:} \OperatorTok{\&}\DataTypeTok{str}\NormalTok{) }\OperatorTok{{-}\textgreater{}} \DataTypeTok{String} \OperatorTok{\{}
    \KeywordTok{let} \KeywordTok{mut}\NormalTok{ result }\OperatorTok{=} \DataTypeTok{String}\PreprocessorTok{::}\NormalTok{new()}\OperatorTok{;}
    \KeywordTok{let} \KeywordTok{mut}\NormalTok{ in\_frontmatter }\OperatorTok{=} \ConstantTok{false}\OperatorTok{;}
    \KeywordTok{let} \KeywordTok{mut}\NormalTok{ frontmatter\_lines }\OperatorTok{=} \DataTypeTok{Vec}\PreprocessorTok{::}\NormalTok{new()}\OperatorTok{;}

    \CommentTok{// Process the file line by line}
    \ControlFlowTok{for}\NormalTok{ line }\KeywordTok{in}\NormalTok{ content}\OperatorTok{.}\NormalTok{lines() }\OperatorTok{\{}
        \CommentTok{// Toggle the frontmatter state on encountering "{-}{-}{-}"}
        \ControlFlowTok{if}\NormalTok{ line }\OperatorTok{==} \StringTok{"{-}{-}{-}"} \OperatorTok{\{}
            \ControlFlowTok{if} \OperatorTok{!}\NormalTok{in\_frontmatter }\OperatorTok{\{}
\NormalTok{                in\_frontmatter }\OperatorTok{=} \ConstantTok{true}\OperatorTok{;}
                \ControlFlowTok{continue}\OperatorTok{;}
            \OperatorTok{\}} \ControlFlowTok{else} \OperatorTok{\{}
                \CommentTok{// End of frontmatter {-} convert and add to result}
\NormalTok{                result}\OperatorTok{.}\NormalTok{push\_str(}\StringTok{"{-}{-}{-}}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}\OperatorTok{;}
\NormalTok{                result}\OperatorTok{.}\NormalTok{push\_str(}\OperatorTok{\&}\NormalTok{convert\_frontmatter(}\OperatorTok{\&}\NormalTok{frontmatter\_lines))}\OperatorTok{;}
\NormalTok{                frontmatter\_lines}\OperatorTok{.}\NormalTok{clear()}\OperatorTok{;}
\NormalTok{                in\_frontmatter }\OperatorTok{=} \ConstantTok{false}\OperatorTok{;} 
                \ControlFlowTok{continue}\OperatorTok{;}
            \OperatorTok{\}}
        \OperatorTok{\}}

        \ControlFlowTok{if}\NormalTok{ in\_frontmatter }\OperatorTok{\{}
            \CommentTok{// Collect frontmatter lines for processing}
\NormalTok{            frontmatter\_lines}\OperatorTok{.}\NormalTok{push(line)}\OperatorTok{;}
        \OperatorTok{\}} \ControlFlowTok{else} \OperatorTok{\{}
            \CommentTok{// Convert admonitions in the content}
            \KeywordTok{let}\NormalTok{ converted\_line }\OperatorTok{=}\NormalTok{ convert\_admonitions(line)}\OperatorTok{;}
\NormalTok{            result}\OperatorTok{.}\NormalTok{push\_str(}\OperatorTok{\&}\NormalTok{converted\_line)}\OperatorTok{;}
\NormalTok{            result}\OperatorTok{.}\NormalTok{push(}\CharTok{\textquotesingle{}}\SpecialCharTok{\textbackslash{}n}\CharTok{\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
        \OperatorTok{\}}
    \OperatorTok{\}}
\NormalTok{    result}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\chapter{Admonition Regex
(convert\_admonitions)}\label{admonition-regex-convert_admonitions}

The conversion of custom Docusaurus admonition syntax relies on a single
Regular Expression to capture the type and optional title, which are
then used to format the Quarto callout block.

pub fn convert\_admonitions(line: \&str) -\textgreater{} String \{ //
Regex to capture: ::: (1:type) (2:optional title) let admonition\_start
= Regex::new(r''\^{}:::(\w)+(.*)\(").unwrap();
    let admonition_end = Regex::new(r"^:::\)``).unwrap();

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{pub} \KeywordTok{fn}\NormalTok{ convert\_admonitions(line}\OperatorTok{:} \OperatorTok{\&}\DataTypeTok{str}\NormalTok{) }\OperatorTok{{-}\textgreater{}} \DataTypeTok{String} \OperatorTok{\{}
    \CommentTok{// Regex to capture: ::: (1:type) (2:optional title)}
    \KeywordTok{let}\NormalTok{ admonition\_start }\OperatorTok{=} \PreprocessorTok{Regex::}\NormalTok{new(}\StringTok{r"\^{}:::(\textbackslash{}w)+(.*)$"}\NormalTok{)}\OperatorTok{.}\NormalTok{unwrap()}\OperatorTok{;}
    \KeywordTok{let}\NormalTok{ admonition\_end }\OperatorTok{=} \PreprocessorTok{Regex::}\NormalTok{new(}\StringTok{r"\^{}:::$"}\NormalTok{)}\OperatorTok{.}\NormalTok{unwrap()}\OperatorTok{;}

    \CommentTok{// Convert opening admonition syntax}
    \ControlFlowTok{if} \KeywordTok{let} \ConstantTok{Some}\NormalTok{(caps) }\OperatorTok{=}\NormalTok{ admonition\_start}\OperatorTok{.}\NormalTok{captures(line) }\OperatorTok{\{}
        \KeywordTok{let}\NormalTok{ admonition\_type }\OperatorTok{=} \OperatorTok{\&}\NormalTok{caps[}\DecValTok{1}\NormalTok{]}\OperatorTok{;}
        \KeywordTok{let}\NormalTok{ title }\OperatorTok{=}\NormalTok{ caps}\OperatorTok{.}\NormalTok{get(}\DecValTok{2}\NormalTok{)}\OperatorTok{.}\NormalTok{map(}\OperatorTok{|}\NormalTok{m}\OperatorTok{|}\NormalTok{ m}\OperatorTok{.}\NormalTok{as\_str()}\OperatorTok{.}\NormalTok{trim())}\OperatorTok{.}\NormalTok{unwrap\_or(}\StringTok{""}\NormalTok{)}\OperatorTok{;}

        \CommentTok{// Map Docusaurus admonitions to Quarto callout types}
        \KeywordTok{let}\NormalTok{ quarto\_type }\OperatorTok{=} \ControlFlowTok{match}\NormalTok{ admonition\_type}\OperatorTok{.}\NormalTok{to\_lowercase()}\OperatorTok{.}\NormalTok{as\_str() }\OperatorTok{\{}
            \StringTok{"note"} \OperatorTok{=\textgreater{}} \StringTok{"note"}\OperatorTok{,}
            \StringTok{"tip"} \OperatorTok{=\textgreater{}} \StringTok{"tip"}\OperatorTok{,}
            \StringTok{"info"} \OperatorTok{=\textgreater{}} \StringTok{"note"}\OperatorTok{,}
            \CommentTok{// ... (other types)}
            \StringTok{"danger"} \OperatorTok{=\textgreater{}} \StringTok{"important"}\OperatorTok{,}
\NormalTok{            \_ }\OperatorTok{=\textgreater{}}\NormalTok{ admonition\_type}\OperatorTok{,}
        \OperatorTok{\};}

        \CommentTok{// Build Quarto callout syntax}
        \ControlFlowTok{if}\NormalTok{ title}\OperatorTok{.}\NormalTok{is\_empty() }\OperatorTok{\{}
            \PreprocessorTok{format!}\NormalTok{(}\StringTok{":::: \{\{\{\}\}\}"}\OperatorTok{,}\NormalTok{ quarto\_type)}
        \OperatorTok{\}} \ControlFlowTok{else} \OperatorTok{\{}
            \CommentTok{// If there\textquotesingle{}s a title, use the .callout{-}type syntax and add a subheading}
            \PreprocessorTok{format!}\NormalTok{(}\StringTok{":::: \{\{.callout{-}\{\}\}\}}\SpecialCharTok{\textbackslash{}n}\StringTok{\#\# \{\}"}\OperatorTok{,}\NormalTok{ quarto\_type}\OperatorTok{,}\NormalTok{ title)}
        \OperatorTok{\}}
     \OperatorTok{\}}
    \CommentTok{// Convert closing admonition syntax}
    \ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ admonition\_end}\OperatorTok{.}\NormalTok{is\_match(line) }\OperatorTok{\{}
        \StringTok{"::::"}\OperatorTok{.}\NormalTok{to\_string()}
    \OperatorTok{\}}
    \CommentTok{// Return line unchanged if it is not an admonition}
    \ControlFlowTok{else} \OperatorTok{\{}
\NormalTok{        line}\OperatorTok{.}\NormalTok{to\_string()}
    \OperatorTok{\}}
  \OperatorTok{\}}

\OperatorTok{\}} 
\end{Highlighting}
\end{Shaded}

\part{qbanner}

\chapter{Qbanner: Terminal Banners for CLI
Applications}\label{qbanner-terminal-banners-for-cli-applications}

Stylish, Resizable, and Color-Ready ASCII Art Banners

\hfill\break

\section{Introduction}\label{introduction-2}

\texttt{qbanner} is a simple yet powerful Rust library designed to
display highly customizable ASCII art banners in command-line interface
(CLI) applications. It uses a modern builder pattern, supports Unicode,
gradients, and automatically adjusts to fit the user's terminal size.

\pandocbounded{\includegraphics[keepaspectratio]{qbanner/./images/demo.gif}}

\subsection{Key Features}\label{key-features-2}

\begin{itemize}
\tightlist
\item
  \textbf{Builder Pattern:} Easy-to-use, chainable methods for
  configuration.
\item
  \textbf{Terminal Awareness:} Automatically detects terminal width for
  centering and resizing.
\item
  \textbf{Color \& Gradient:} Support for standard ANSI colors, bright
  colors, and dynamic RGB gradients.
\item
  \textbf{Fonts:} Includes modern Unicode, classic Standard, and compact
  Small fonts.
\item
  \textbf{Fallback Logic:} Gracefully falls back to smaller fonts or
  plain text if the banner exceeds terminal width.
\item
  \textbf{Screen Management:} Option to automatically clear the screen
  before rendering.
\end{itemize}

\subsection{Installation}\label{installation}

Add \texttt{qbanner} and its dependencies (if necessary, though
\texttt{qbanner} bundles most of its needs) to your \texttt{Cargo.toml}:

```toml

{[}dependencies{]} qbanner = \{ path = ``path/to/qbanner'' \} \# If
developing locally \# qbanner = ``1.0'' \# If published on crates.io
owo-colors = ``3.5'' terminal\_size = ``0.3''

```

\subsection{Quick Start}\label{quick-start}

The core of the library is the \texttt{Banner} struct, configured
entirely through method chaining.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{use} \PreprocessorTok{qbanner::}\OperatorTok{\{}\NormalTok{Banner}\OperatorTok{,}\NormalTok{ Color}\OperatorTok{,}\NormalTok{ Alignment}\OperatorTok{\};}

\KeywordTok{fn}\NormalTok{ main() }\OperatorTok{\{}
    \CommentTok{// 1. Simple, centered, cyan Unicode banner}
    \PreprocessorTok{Banner::}\NormalTok{new(}\StringTok{"Welcome"}\NormalTok{)}
        \OperatorTok{.}\NormalTok{color(}\PreprocessorTok{Color::}\NormalTok{Cyan)}
        \OperatorTok{.}\NormalTok{alignment(}\PreprocessorTok{Alignment::}\NormalTok{Center)}
        \OperatorTok{.}\NormalTok{render()}\OperatorTok{;}

    \CommentTok{// 2. Banner with an RGB gradient and a subtitle}
    \PreprocessorTok{Banner::}\NormalTok{new(}\StringTok{"DevOps"}\NormalTok{)}
        \OperatorTok{.}\NormalTok{gradient(}\PreprocessorTok{vec!}\NormalTok{[}
\NormalTok{            (}\DecValTok{255}\OperatorTok{,} \DecValTok{100}\OperatorTok{,} \DecValTok{0}\NormalTok{)}\OperatorTok{,} \CommentTok{// Orange}
\NormalTok{            (}\DecValTok{255}\OperatorTok{,} \DecValTok{0}\OperatorTok{,} \DecValTok{100}\NormalTok{)  }\CommentTok{// Pink}
\NormalTok{        ])}
        \OperatorTok{.}\NormalTok{subtitle(}\StringTok{"CI/CD Pipeline v2.1"}\NormalTok{)}
        \OperatorTok{.}\NormalTok{render()}\OperatorTok{;}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\chapter{References}\label{references}

\begin{itemize}
\item
  API Reference
\item
  Developer Notes
\end{itemize}




\end{document}
